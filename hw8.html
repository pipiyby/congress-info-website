<!DOCTYPE html>
<html ng-app="myApp">
   <head>
       <title>Bootstrap</title>
       <meta name="viewport" content="width=device-width, initial-scale=1.0">
       
       <!--  Bootstrap -->
		   <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/regular.css" integrity="sha384-zkhEzh7td0PG30vxQk1D9liRKeizzot4eqkJ8gB3/I+mZ1rjgQk+BSt2F6rT2c+I" crossorigin="anonymous">
       <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
       <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
       <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.min.js"></script>
       <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.js"></script>
       <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular-animate.js"></script>
       <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular-sanitize.js"></script>
       <script src="//angular-ui.github.io/bootstrap/ui-bootstrap-tpls-2.2.0.js"></script>
       <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
       <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
       <script src="dirPagination.js"></script>
       
       <!-- Google Fonts -->
       <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
       
       <style type="text/css">
           html{
               height: 100%;
               margin: 0;
               width:100%;
           }
           body{
               font-family: 'Open Sans', sans-serif;
               height: 100%;
               margin: 0;
               width:100%;
           }
           #flheader{
               width:100%;
               z-index:999;
               background-color:white;
               position:fixed
           }
           #logoHeader{
               margin-left: 45%;
               height: 16px;
               font-size: 1em;
               padding-bottom: 0px;
               margin-bottom: 0px;
           } 
           #congressAPI{
               vertical-align: bottom;
           }
           #wrapper{
               padding-left: 15%; 
               height: inherit;
               display: inline-block;
               width:100%;
           }
           #wrapper.toggled{
               padding-left: 0;
           }
           #nav_wrapper{
               width: 15%;
               height:auto;
               min-height: 100%;
               position: fixed;
               margin-left: -15%;
               display: inline-block;
               background-color: #454545;
               margin-top: 38px;
               z-index:998;
           }
           #wrapper.toggled #nav_wrapper{
               width: 0;
           }
           ul#nav{
               margin-left: 0px;
               margin-bottom: 0px;
               padding-top: 15%;
               padding-left: 10%;
               width: 100%;
               height: 100%;
               background-color: #454545;
               float: left;
           }
           ul#nav li{
               list-style-type: none;
               line-height: 3;
               font-size: 0.9em;
           }
           ul#nav li a{
               display: inline-block;
               color: #C6C6C6;
               text-decoration: none;
           }
           ul#nav li a:hover{
               color: white;
               text-decoration: none;
           }
           #infoContent{
               background-color: #F3F3F3;
               width: 85%;
               height:auto;
               min-height: 100%;
               padding-left: 1.8%;
               padding-right: 1.2%;
               position: absolute;
               display: inline-block;
               margin-top: 38px;
           }
           #wrapper.toggled #infoContent{
               position: absolute;
               width: 100%;
           }
           .congress_type {
               padding-bottom: 0.6%;
               padding-top: 0;
               height: 8%;
           }
           .underLine{
               border-bottom: 1px solid lightgrey;
           }
           .table_top{
               margin-top: 2%;
               margin-bottom: 2.5%;
               height: 95%;
               width: 99.5%;
               background-color: white;
           }
           .table_top h5{
               margin-left: 0;
               padding-left: 5%;
               padding-bottom: 
           }
           .shadowed_box{
               border-radius: 3px;
               box-shadow: 0 0 12px #9E9E9E; 
               padding:0;
               margin-left: 0.3%;
               margin-right: 0.5%;
               width:98%;
           }
           #myTabContent{
               height: 89%;
               margin-top: 1.6%;
               margin-left: 2.5%;
               width: 95%;
               margin-right: 2.5%;
               border: 1px solid lightgrey;
               border-radius: 3px;
               box-sizing: border-box;
           }
           #myfavoriteTabContent{
               height: 89%;
               margin-top: 1.6%;
               margin-left: 2.5%;
               width: 95%;
               margin-right: 2.5%;
               border: 1px solid lightgrey;
               border-radius: 3px;
               box-sizing: border-box;
           }
           #mybillTabContent{
               height: 89%;
               margin-top: 1.6%;
               margin-left: 2.5%;
               width: 95%;
               margin-right: 2.5%;
               border: 1px solid lightgrey;
               border-radius: 3px;
           }
           #mycommitteeTabContent{
               height: 89%;
               margin-top: 1.6%;
               margin-left: 2.5%;
               width: 95%;
               margin-right: 2.5%;
               border: 1px solid lightgrey;
               border-radius: 3px;
           }
           #tb_with_filter{
               width: 100%;
               height: auto;
           }
           #tb_with_filter_lb{
               padding-left:7%;
               height: 40%;
               margin-bottom: 2%;
               margin-right: 2%;
               font-size: 0.9em;
               box-sizing: border-box;
           }
           #btb_with_filter{
               width: 100%;
               height: auto;
           }
           #filter_form{
               margin-right: 5%;
               text-align: right;
           }
           #ctb_with_filter{
               width: 100%;
               height: auto;
           }
           #ftb_with_filter{
               width: 100%;
               height: auto;
           }
           #btb_with_filter_lb{
               padding-left:7%;
               width: auto;
               height: 40%;
               margin-bottom: 2%;
               font-size: 0.9em;
           }
           #ctb_with_filter_lb{
               padding-left:7%;
               width: auto;
               height: 40%;
               margin-bottom: 2%;
               font-size: 0.9em;
           }
           #ftb_with_filter_lb{
               padding-left:7%;
               width: auto;
               height: 40%;
               margin-bottom: 1%;
               font-size: 0.95em;
               padding-top: 1%;
           }
           #pagi{
               height: 4%;
               vertical-align: top;
               padding-bottom: 1.5%;
               text-align: center;
           }
           #congressTable{
               width: 100%;
               margin-bottom: -2%;
               height: 80%;
               vertical-align: top;
           }
           #bcongressTable{
               width: 100%;
               margin-bottom: -2%;
               height: 80%;
               vertical-align: top;
           }
           #ccongressTable{
               width: 100%;
               margin-bottom: -2%;
               height: 80%;
               vertical-align: top;
           }
           #fcongressTable{
               width: 100%;
               margin-bottom: -2%;
               height: 80%;
               vertical-align: top;
           }
           .detailLine{
               height:7%; 
               width: 100%;
           }
           #detailImgTable{
               text-align: center;
               padding:1.5%;
           }
           #fdetailImgTable{
               text-align: center;
               padding:1.5%;
           }
           .upLine tr{
               border-top: 1px solid lightgrey;
           }
           .detailInTable{
               vertical-align:top;
               padding-left: 2%;
               padding-right: 2%;
               padding-top: 1%;
               font-size: 0.9em;
           }
           #billdetailtable{
               padding-left: 4px;
               padding-right: 4px;
               padding-top: 3px;
               font-size: 0.9em;
               height:100%;
               vertical-align: top;
           }
           #billdetailtable th{
               width: 15%;
           }
           #dInfoTable{
               vertical-align: top;
               padding:1.5%;
               padding-left: 0;
           }
           #dInfoTable tr{
               width:100%;
           }
           #dInfoTable td{
               height: 28px;
               padding-left: 5%;
               width:100%;
           }
           #fdInfoTable{
               vertical-align: top;
               padding:1.5%;
               padding-left: 0;
           }
           #fdInfoTable tr{
               width:100%;
           }
           #fdInfoTable td{
               height: 28px;
               padding-left: 5%;
               width:100%;
           }
           .detailot{
               margin-top: 0;
               padding-top: 0;
               width:100%;
           }
           
           .detailot th{
               width: 30%;
               height:30px;
               padding-left: 2.5%;
               vertical-align: top;
           }
           
           #committeeTable{
               font-size:0.96em;
               width:96%;
               margin-left:2%;
               margin-right:2%
           }
           #committeeTable td{
               padding-top: 4px;
               padding-bottom: 4px;
           }
          
           #committeeTable th{
               padding-top: 4px;
               padding-bottom: 4px;
           }
           #fcommitteeTable{
               font-size:0.96em;
               width:96%;
               margin-left:2%;
               margin-right:2%
           }
           #fcommitteeTable td{
               padding-top: 4px;
               padding-bottom: 4px;
           }
          
           #fcommitteeTable th{
               padding-top: 4px;
               padding-bottom: 4px;
           }
           #billTable{
               font-size:0.96em;
               width:96%;
               margin-left:2%;
               margin-right:2%;
               padding-bottom:1%;
               margin-bottom: 1%;
               
           }
           
           #billTable td{
               vertical-align: top;
               padding-top: 4px;
           }
           #fbillTable{
               font-size:0.96em;
               width:96%;
               margin-left:2%;
               margin-right:2%;
               padding-bottom:1%;
               margin-bottom: 1%;
               
           }
           
           #fbillTable td{
               vertical-align: top;
               padding-top: 4px;
           }
           .icon_b{
               color:yellow;
               -webkit-text-stroke-width: 1px;
               -webkit-text-stroke-color: black;
           }
           .bill_d_table{
               font-size:0.96em;
               width:46%;
               margin-left:3%;
               margin-top: 8px;
           }
           .bill_d_table td{
               padding-top: 4px;
               padding-bottom: 6px;
               vertical-align: top;
           }
           .bill_d_table th{
               padding-top: 4px;
               padding-bottom: 4px;
               vertical-align: top;
           }
           #myTab a{ 
               font-size: 0.8em;
           }
           @media (max-width:700px){
               .sidebarhid{
                   display: none;
               }
               #wrapper{
                   padding-left: 32px; 
                   height: auto;
                   display: table;
                   width:100%;
               }
               #nav_wrapper{
                   width: 32px;
                   height:auto;
                   min-height: 100%;
                   position: fixed;
                   margin-left: -32px;
                   display: table-cell;
                   background-color: #454545;
                   margin-top: 38px;
               }
               #infoContent{
                   background-color: #F3F3F3;
                   width: 95%;
                   height:auto;
                   min-height: 100%;
                   padding-left: 1.8%;
                   padding-right: 1.2%;
                   position: absolute;
                   display: table-cell;
                   margin-top: 38px;
               }
               ul#nav{
                   margin-left: 0px;
                   margin-bottom: 0px;
                   padding-top: 15%;
                   padding-left: 30%;
                   width: 100%;
                   height: 100%;
                   background-color: #454545;
                   float: left;
               }
               
           }
           @media only screen and (min-device-width:375px) and (max-device-width:667px) and (orientation:landscape){
               #flheader{
                   width:100%;
                   z-index:999;
                   background-color:white;
                   position:fixed
               }
               .sidebarhid{
                   display: none;
               }
               #wrapper{
                   padding-left: 32px; 
                   height: auto;
                   display: table;
                   width:100%;
               }
               #nav_wrapper{
                   width: 32px;
                   height:auto;
                   min-height: 100%;
                   position: fixed;
                   margin-left: -32px;
                   display: table-cell;
                   background-color: #454545;
                   margin-top: 38px;
                   z-index:998;
               }
               #infoContent{
                   background-color: #F3F3F3;
                   width: 95%;
                   height:auto;
                   min-height: 100%;
                   padding-left: 1.8%;
                   padding-right: 1.2%;
                   position: absolute;
                   display: table-cell;
                   margin-top: 38px;
               }
               
               ul#nav{
                   margin-left: 0px;
                   margin-bottom: 0px;
                   padding-top: 15%;
                   padding-left: 30%;
                   width: 100%;
                   height: 100%;
                   background-color: #454545;
                   float: left;
               }
               .shadowed_box{
                   border-radius: 3px;
                   box-shadow: 0 0 12px #9E9E9E; 
                   padding:0;
                   margin-left: 0.3%;
                   margin-right: 0.5%;
                   width:350px;
               }
               #dInfoTable{
                   vertical-align: top;
                   padding:1.5%;
                   padding-left: 0;
                   margin-bottom: 3%;
                   border-bottom: 1px solid lightgrey
               }
               #dInfoTable tr{
                   width:100%;
               }
               #dInfoTable td{
                   height: 28px;
                   padding-left: 5%;
                   width:100%;
               }
               .detailot{
                   margin-top: 0;
                   padding-top: 0;
                   width:100%;
                   margin-bottom: 4%;
               }

               .detailot td{
                   width: 30%;
                   height:30px;
                   padding-left: 4%;
                   vertical-align: top;
               }
               #committeeTable{
                   font-size:0.96em;
                   width:100%;
                   margin-left: 0;
                   border: 1px solid lightgrey;
               }
               #committeeTable td{
                   padding-top: 4px;
                   padding-bottom: 4px;
                   padding-left: 3px;
               }

               #committeeTable th{
                   padding-top: 4px;
                   padding-bottom: 4px;
                   padding-left: 3px;
               }
               #fcommitteeTable{
                   font-size:0.96em;
                   width:100%;
                   margin-left: 0;
                   border: 1px solid lightgrey;
               }
               #fcommitteeTable td{
                   padding-top: 4px;
                   padding-bottom: 4px;
                   padding-left: 3px;
               }

               #fcommitteeTable th{
                   padding-top: 4px;
                   padding-bottom: 4px;
                   padding-left: 3px;
               }
               #billTable{
                   font-size:0.96em;
                   width:100%;
                   padding-bottom:1%;
                   margin-bottom: 1%;
                   margin-left: 0;
                   border: 1px solid lightgrey;
               }

               #billTable td{
                   vertical-align: top;
                   padding-top: 4px;
                   padding-left: 3px;
               }
               #fbillTable{
                   font-size:0.96em;
                   width:100%;
                   padding-bottom:1%;
                   margin-bottom: 1%;
                   margin-left: 0;
                   border: 1px solid lightgrey;
               }

               #fbillTable td{
                   vertical-align: top;
                   padding-top: 4px;
                   padding-left: 3px;
               }
               #billdetailtable{
                   padding-left: 4px;
                   padding-right: 4px;
                   padding-top: 3px;
                   font-size: 0.9em;
                   height:100%;
                   vertical-align: top;
               }
               #billdetailtable th{
                   width: 50%;
               }
           }
           @media (max-width:500px){
               #flheader{
                   width:100%;
                   z-index:999;
                   background-color:white;
                   position:fixed
               }
               .sidebarhid{
                   display: none;
               }
               #wrapper{
                   padding-left: 32px; 
                   height: auto;
                   display: table;
                   width:100%;
               }
               #nav_wrapper{
                   width: 32px;
                   height:auto;
                   min-height: 100%;
                   position: fixed;
                   margin-left: -32px;
                   display: table-cell;
                   background-color: #454545;
                   margin-top: 38px;
                   z-index:998;
               }
               #infoContent{
                   background-color: #F3F3F3;
                   width: 95%;
                   height:auto;
                   min-height: 100%;
                   padding-left: 1.8%;
                   padding-right: 1.2%;
                   position: absolute;
                   display: table-cell;
                   margin-top: 38px;
               }
               
               ul#nav{
                   margin-left: 0px;
                   margin-bottom: 0px;
                   padding-top: 15%;
                   padding-left: 30%;
                   width: 100%;
                   height: 100%;
                   background-color: #454545;
                   float: left;
               }
               .shadowed_box{
                   border-radius: 3px;
                   box-shadow: 0 0 12px #9E9E9E; 
                   padding:0;
                   margin-left: 0.3%;
                   margin-right: 0.5%;
                   width:350px;
               }
               #dInfoTable{
                   vertical-align: top;
                   padding:1.5%;
                   padding-left: 0;
                   margin-bottom: 3%;
                   border-bottom: 1px solid lightgrey
               }
               #dInfoTable tr{
                   width:100%;
               }
               #dInfoTable td{
                   height: 28px;
                   padding-left: 5%;
                   width:100%;
               }
               .detailot{
                   margin-top: 0;
                   padding-top: 0;
                   width:100%;
                   margin-bottom: 4%;
               }

               .detailot td{
                   width: 30%;
                   height:30px;
                   padding-left: 4%;
                   vertical-align: top;
               }
               #committeeTable{
                   font-size:0.96em;
                   width:100%;
                   margin-left: 0;
                   border: 1px solid lightgrey;
               }
               #committeeTable td{
                   padding-top: 4px;
                   padding-bottom: 4px;
                   padding-left: 3px;
               }

               #committeeTable th{
                   padding-top: 4px;
                   padding-bottom: 4px;
                   padding-left: 3px;
               }
               #fcommitteeTable{
                   font-size:0.96em;
                   width:100%;
                   margin-left: 0;
                   border: 1px solid lightgrey;
               }
               #fcommitteeTable td{
                   padding-top: 4px;
                   padding-bottom: 4px;
                   padding-left: 3px;
               }

               #fcommitteeTable th{
                   padding-top: 4px;
                   padding-bottom: 4px;
                   padding-left: 3px;
               }
               #billTable{
                   font-size:0.96em;
                   width:100%;
                   padding-bottom:1%;
                   margin-bottom: 1%;
                   margin-left: 0;
                   border: 1px solid lightgrey;
               }

               #billTable td{
                   vertical-align: top;
                   padding-top: 4px;
                   padding-left: 3px;
               }
               #fbillTable{
                   font-size:0.96em;
                   width:100%;
                   padding-bottom:1%;
                   margin-bottom: 1%;
                   margin-left: 0;
                   border: 1px solid lightgrey;
               }

               #fbillTable td{
                   vertical-align: top;
                   padding-top: 4px;
                   padding-left: 3px;
               }
               #billdetailtable{
                   padding-left: 4px;
                   padding-right: 4px;
                   padding-top: 3px;
                   font-size: 0.9em;
                   height:100%;
                   vertical-align: top;
               }
               #billdetailtable th{
                   width: 50%;
               }
           }
       </style>
       
       <script type="text/javascript">
           //php_url = "";
           function slideTable(detailID,wh){
               if(wh == "legislators"){
                   $('#carouselleg').carousel('next');
               }
               else if(wh == "favorite"){
                   $('#carouselfav').carousel('next');
                   $("#favdetail").html('<tr class="detailLine underLine"><td style="padding-left:1%;width:50%;vertical-align:center"><button type="button" class="btn btn-default btn-md" onclick="favdetailBack()"><i class="fas fa-angle-left" aria-hidden="true"></i></button><span style="font-size:1.5em;">    Details</span></td><td style="text-align:right; padding-right:1%; width:50%" id="favbtn"></td></tr><tr><td colspan="2"><div class="container-fluid" style="width:100%"><div class="row"><div class="col-xs-12 col-lg-6 detailInTable upLine"><table style="width:100%"><tr><td style="width:100%"><div class="row" style="width:100%;margin-left:0;margin-bottom:1%"><div class="col-xs-12 col-lg-6" id="fdetailImgTable"></div><div class="col-xs-12 col-lg-6" id="fdInfoTable"></div></div></td></tr><tr style="border-top:0"><td id="fdetailotherInfo" colspan="2"></td></tr></table></div><div class="col-xs-12 col-lg-6"><table style="width:100%;height:100%"><tr><td style="vertical-align:top;height:auto"><span style="font-size:1.3em">Committees</span><table id="fcommitteeTable"></table></td></tr><tr><td style="vertical-align:top"><span style="font-size:1.3em">Bills</span><table id="fbillTable"></table></td></tr></table></div></div></div></td></tr></table></td></tr>');
               }
               $.ajax({
                   url: 'http://congressphp-env.pn3iidvwsk.us-east-2.elasticbeanstalk.com/infoprecess.php?datab=legislators&byTab=detailinfo&detailid='+detailID,
                   data:{symbol:"AAPL"},
                   type: 'GET',
                   success: function(response,status,xhr){
                       obj = JSON.parse(response);
                       if(wh == "legislators"){
                           show_detail_info_table(obj,"legislators");
                       }
                       else if(wh == "favorite"){
                           show_detail_info_table(obj,"favorite");
                       }
                       var id = "obj.member_id";
                       var imgpath =  "'http://theunitedstates.io/images/congress/225x275/'+obj.member_id+'.jpg'";
                       if(!obj.hasOwnProperty("current_party") || obj.current_party == null){
                           var party = "'N.A'";
                       }
                       else{
                           var party = "obj.current_party";
                       }
                       var name = "obj.last_name+', '+obj.first_name";
                       var chamber = "obj.roles[0].chamber";
                       var state = "obj.roles[0].state";
                       if(obj.hasOwnProperty("oc_email")){
                           if(obj.oc_email != null){
                               var em = "obj.oc_email";
                           }
                           else{
                               var em = "'N.A'";
                           }
                       }
                       else{
                           var em = "'N.A'";
                       }
                       var k = '"l'+obj.member_id+'"';
                       if(localStorage.getItem(k)==null){
                           //alert("not fed");
                           var b = '<button type="button" class="btn btn-default btn-md" onclick="favorite('+id+','+imgpath+','+party+','+name+','+chamber+','+state+','+em+',0)"><i class="far fa-star" aria-hidden="true"></i></button>';
                       }
                       else{
                           var b = '<button type="button" class="btn btn-default btn-md" onclick="unfavorite('+id+','+imgpath+','+party+','+name+','+chamber+','+state+','+em+',0)"><i class="fa fa-star icon_b" aria-hidden="true"></i></button>';
                       }
                       if(wh == "legislators"){
                           $("#lfavbtn").html(b);
                       }
                       else if(wh == "favorite"){
                           $("#favbtn").html(b);
                       }
                   },
                   error: function(xhr,status,error){
                       alert("detailerror");
                   }
               });
               $.ajax({
                   url: 'http://congressphp-env.pn3iidvwsk.us-east-2.elasticbeanstalk.com/infoprecess.php?datab=legislators&byTab=detailco&memberid='+detailID,
                   data:{symbol:"AAPL"},
                   type: 'GET',
                   success: function(response,status,xhr){
                       obj_1 = JSON.parse(response);
                       if(wh == "legislators"){
                           show_detail_info_table1(obj_1,"legislators");
                       }
                       else if(wh == "favorite"){
                           show_detail_info_table1(obj_1,"favorite");
                       }
                   },
                   error: function(xhr,status,error){
                       alert("detailerror");
                   }
               });
               $.ajax({
                   url: 'http://congressphp-env.pn3iidvwsk.us-east-2.elasticbeanstalk.com/infoprecess.php?datab=legislators&byTab=detailbi&sponsorid='+detailID,
                   data:{symbol:"AAPL"},
                   type: 'GET',
                   success: function(response,status,xhr){
                       obj_two = JSON.parse(response);
                       if(wh == "legislators"){
                           show_detail_info_table2(obj_two,"legislators");
                       }
                       else if(wh == "favorite"){
                           show_detail_info_table2(obj_two,"favorite");
                       }
                   },
                   error: function(xhr,status,error){
                       alert("detailerror");
                   }
               });
           }
           function slideBillTable(billDetailID,wh){
               if(wh == "bills"){
                   $('#carouselbill').carousel('next');;
               }
               else if(wh == "favorite"){
                   $('#carouselfav').carousel('next');
                   $("#favdetail").html('<tr class="detailLine underLine"><td style="padding-left:1%;width:50%;vertical-align:center"><button type="button" class="btn btn-default btn-md" onclick="favdetailBack()"><i class="fas fa-angle-left" aria-hidden="true"></i></button><span style="font-size:1.5em;">    Details</span></td><td style="text-align:right; padding-right:1%; width:50%" id="favbtnb1"></td></tr><tr style="width:100%"><td style="width:100%" colspan="2"><div class="container-fluid" style="width:100%"><div class="row"><div class="col-md-6 col-xs-12 upLine" id="fbilldetailTable" style="vertical-align:top"></div><div class="col-md-6 col-xs-12" id="fbillpdf"></div></div></div></td></tr>');
               }
               $.ajax({
                   url: 'http://congressphp-env.pn3iidvwsk.us-east-2.elasticbeanstalk.com/infoprecess.php?datab=bills&byTab=detail&billid='+billDetailID,
                   data:{symbol:"AAPL"},
                   type: 'GET',
                   success: function(response,status,xhr){
                       bill_obj_two = JSON.parse(response);
                       if(wh == "bills"){
                           show_bill_info_table(bill_obj_two,"bills");
                       }
                       else if(wh == "favorite"){
                           show_bill_info_table(bill_obj_two,"favorite");
                       }
                       var id = "bill_obj_two.bill_id";
                       if(!bill_obj_two.hasOwnProperty("bill_type") || bill_obj_two.bill_type == null){
                           var btype = "'N.A'";
                       }
                       else{
                           var btype = "bill_obj_two.bill_type";
                       }
                       if(bill_obj_two.hasOwnProperty("title")){
                           if(bill_obj_two.title != null){
                               var oftitle = "bill_obj_two.title";
                           }
                           else{
                               var oftitle = "'N.A'";
                           }
                       }
                       else{
                           var oftitle = "'N.A'";
                       }
                       var chamber = "'N.A'";
                       if(bill_obj_two.hasOwnProperty("introduced_date")){
                           if(bill_obj_two.introduced_date != null){
                               var introducedon = "bill_obj_two.introduced_date";
                           }
                           else{
                               var introducedon = "'N.A'";
                           }
                       }
                       else{
                           var introducedon = "'N.A'";
                       }
                       if(bill_obj_two.hasOwnProperty("sponsor")){
                           if(bill_obj_two.sponsor != null){
                               var spon = "bill_obj_two.sponsor_title+' '+bill_obj_two.sponsor";
                           }
                           else{
                               var spon = "'N.A'";
                           }
                       }
                       else{
                           var spon = "'N.A'";
                       }
                       var k = '"b'+bill_obj_two.bill_id+'"';
                       if(localStorage.getItem(k)==null){
                           var b = '<button type="button" class="btn btn-default btn-md" onclick="favorite1('+id+','+btype+','+oftitle+','+chamber+','+introducedon+','+spon+')"><i class="far fa-star" aria-hidden="true"></i></button>';
                       }
                       else{
                           var b = '<button type="button" class="btn btn-default btn-md" onclick="unfavorite1('+id+','+btype+','+oftitle+','+chamber+','+introducedon+','+spon+')"><i class="fas fa-star icon_b" aria-hidden="true"></i></button>';
                       }
                       if(wh == "bills"){
                           $("#favbtn1").html(b);
                       }
                       else if(wh == "favorite"){
                           $("#favbtnb1").html(b);
                       }
                   },
                   error: function(xhr,status,error){
                       alert("detailerror");
                   }
               });
           }
           function detailBack(){
               $('#carouselleg').carousel('prev');
           }
           function billdetailBack(){
               $('#carouselbill').carousel('prev');
           }
           function favdetailBack(){
               $('#carouselfav').carousel('prev');
               show_favorite_table("legislators");
               show_favorite_table("bills");
               show_favorite_table("committees");
           }
           function checkExist(obj_tobe_ckeck){
               if(typeof obj_tobe_ckeck != "undefined"){
                   if(obj_tobe_ckeck != null){
                       if(obj_tobe_ckeck == "house"){
                           return "House";
                       }
                       else if(obj_tobe_ckeck == "senate"){
                           return "Senate";
                       }
                       else if(obj_tobe_ckeck == "joint"){
                           return "Joint";
                       }
                       else{
                           return obj_tobe_ckeck;
                       }
                   }
                   else{
                       return 'N.A';
                   }
               }
               else{
                   return 'N.A';
               }
           }
           function matchMonth(month){
               switch(month){
                   case 1: return 'Jan';
                   case 2: return 'Feb';
                   case 3: return 'Mar';
                   case 4: return 'Apr';
                   case 5: return 'May';
                   case 6: return 'Jun';
                   case 7: return 'Jul';
                   case 8: return 'Aug';
                   case 9: return 'Sep';
                   case 10: return 'Oct';
                   case 11: return 'Nov';
                   case 12: return 'Dec';
               }
           }
           function percentage(dobj1,dobj2){
               var cur = new Date($.now());
               var beg = new Date(dobj1);
               var sto = new Date(dobj2);
               var total = sto.getTime()-beg.getTime();
               var timepass = Math.min(cur.getTime()-beg.getTime(), total);
               return Math.round(100*timepass/total);
           }
           function show_bill_info_table(billdetailobj,wh){
               var h = '<table class="upLine bill_d_table" style="width:96%">';
               h += '<tr><th>Bill ID</th><td>'+checkExist(billdetailobj.bill_id)+'</td></tr>';
               h += '<tr class="sidebarhid"><th>Title</th><td>'+checkExist(billdetailobj.title)+'</td></tr>';
               h += '<tr><th>Bill Type</th><td>';
               if(checkExist(billdetailobj.bill_type)!='N.A'){
                   h += billdetailobj.bill_type.toUpperCase();
               }
               h += '</td></tr>';
               h += '<tr><th>Sponsor</th><td>'+billdetailobj.sponsor_title+' '+billdetailobj.sponsor+'</td></tr>';
               h += '<tr><th>Chamber</th><td>'+checkExist(billdetailobj.chamber)+'</td></tr>';
               h += '<tr><th>Status</th><td>';
               if(billdetailobj.active==true){
                   h += 'Active</td></tr>';
               }
               else{
                   h += 'New</td></tr>';
               }
               h += '<tr><th>Introduced On</th><td>'+checkExist(billdetailobj.introduced_date)+'</td></tr>';
               h += '<tr><th>Congress URL</th><td>';
               if(checkExist(billdetailobj.congressdotgov_url)!='N.A'){
                   h += '<a href="'+billdetailobj.congressdotgov_url+'">URL</a></td></tr>';
               }
               else{
                   h += 'N.A</td></tr>';
               }
               if(billdetailobj.hasOwnProperty("congressdotgov_url")){
                   h += '<tr><th>Version Status</th><td>'+checkExist(billdetailobj.versions)+'</td></tr><tr><th>Bill URL</th><td>';
                   if(checkExist(billdetailobj.congressdotgov_url)!='N.A'){
                       h += '<a href="'+billdetailobj.congressdotgov_url+'">Link</a></td></tr>';
                       h1 = '<embed style="margin-top:3px" width="98%" height="650px" type="application/pdf"  src="'+billdetailobj.congressdotgov_url+'/text"></embed>'
                   }
                   else{
                       h += 'N.A</td></tr>';
                   }
               }
               else{
                   h += '<tr><th>Version Status</th><td></td></tr><tr><th>Bill URL</th><td>';
                   h += 'N.A</td></tr>';
               }
               h += '</table>';
               if(wh == "bills"){
                   $("#billdetailTable").html(h);
                   $("#billpdf").html(h1);
               }
               else if(wh == "favorite"){
                   $("#fbilldetailTable").html(h);
                   $("#fbillpdf").html(h1);
               }
           }
           function show_detail_info_table(detailobj,wh){
               h_t = '<img style="height:150px" src="http://theunitedstates.io/images/congress/225x275/'+detailobj.member_id+'.jpg">';
               h_t_t = '<table style="width:100%"><tr><td>'+detailobj.roles[0].short_title+' '+detailobj.last_name+', '+detailobj.first_name+'</td></tr><tr><td>';
               if(checkExist(detailobj.oc_email)!='N.A'){
                   h_t_t += '<a href="mailto:'+detailobj.oc_email + '">'+detailobj.oc_email+'</a>';
               }
               else{
                   h_t_t+='Email: N.A';
               }
               h_t_t +='</td></tr><tr><td>Chamber: '+checkExist(detailobj.roles[0].chamber)+'</td></tr><tr><td>Contact: <a>'+checkExist(detailobj.roles[0].phone)+'</a></td></tr><tr><td>';
               if(checkExist(detailobj.current_party)=="R"){
                   h_t_t += '<img style="height:23px" src="r.png">Republic';
               }
               else if(checkExist(detailobj.current_party)=="D"){
                   h_t_t += '<img style="height:23px" src="d.png">Democrat';
               }
               else{
                   h_t_t += 'N.A';
               }
               h_t_t += '</td></tr></table>';
               htext = '<table class="detailot"><tr sytle="border-top:0"><th class="sidebarhid">Start Term</th><td>';
               htext += checkExist(detailobj.roles[0].start_date)+'</td></tr>';
               htext += '<tr><th class="sidebarhid">End Term</th><td>'+checkExist(detailobj.roles[0].end_date)+'</td></tr>';
               htext += '<tr class="sidebarhid"><th>Terms</th><td>'+'<div class="progress" style="margin-top:2%;margin-bottom:5%"><div class="progress-bar" role="progressbar" aria-valuenow="';
               var pctg = percentage(detailobj.roles[0].start_date,detailobj.roles[0].end_date);
               htext += pctg+'" aria-valuemin="0" aria-valuemax="100" style="width:'+pctg+'%;background-color:#5FB760">'+pctg+'%</div></div>'+'</td></tr>';
               htext += '<tr><th class="sidebarhid">Office</th><td>'+checkExist(detailobj.roles[0].office)+'</td></tr>';
               htext += '<tr><th class="sidebarhid">State</th><td>'+checkExist(detailobj.roles[0].state)+'</td></tr>';
               htext += '<tr><th class="sidebarhid">Fax</th><td>';
               if(checkExist(detailobj.roles[0].fax)!='N.A'){
                   htext += '<a>'+checkExist(detailobj.roles[0].fax)+'</a>';
               }
               else{
                   htext +='N.A';                          
               }
               htext +='</td></tr>';
               htext += '<tr><th class="sidebarhid">Birthday</th><td>'+checkExist(detailobj.date_of_birth)+'</td></tr>';
               htext += '<tr><th class="sidebarhid">Social Links</th><td>';
               if(checkExist(detailobj.twitter_account) != 'N.A'){
                   htext += '<a href="http://twitter.com/'+checkExist(detailobj.twitter_account)+'"><img src="t.png" style="height:26px"></a>&nbsp;';
               }
               if(checkExist(detailobj.facebook_account) != 'N.A'){
                   htext += '<a href="http://facebook.com/'+checkExist(detailobj.facebook_account)+'"><img src="f.png" style="height:26px"></a>&nbsp;';
               }
               if(checkExist(detailobj.website) != 'N.A'){
                   htext += '<a href="'+checkExist(detailobj.website)+'"><img src="w.png" style="height:26px"></a>';
               }
               htext += '</td></tr></table>';
               if(wh == "legislators"){
                   $("#detailImgTable").html(h_t);
                   $("#dInfoTable").html(h_t_t);
                   $("#detailotherInfo").html(htext);
               }
               else if(wh == "favorite"){
                   $("#fdetailImgTable").html(h_t);
                   $("#fdInfoTable").html(h_t_t);
                   $("#fdetailotherInfo").html(htext);
               }
           }
           function show_detail_info_table1(detailobj1,wh){
               if(detailobj1.committees.length==0){
                   htext_1 = '<tr style="width:100%"><td><table><tr><th style="width:18%">Chamber</th><th style="width:21%">Committee ID</th><th class="sidebarhid" style="width:57%">Name</th></tr>';
               }
               else{
                   htext_1 = '<tr style="width:100%"><td><table><tr><th style="width:18%">Chamber</th><th style="width:21%">Committee ID</th><th class="sidebarhid" style="width:57%">Name</th></tr>';
                   var bouns = Math.min(detailobj1.committees.length,5);
                   for(var i=0;i<bouns;i++){
                       htext_1 += '<tr style="border-top:1px solid lightgrey;height:15%"><td>';
                       if(detailobj1.chamber=="House"){
                           htext_1 += 'House</td><td>';
                       }
                       else if(detailobj1.chamber=="Senate"){
                           htext_1 += 'Senate</td><td>';
                       }
                       else if(detailobj1.chamber=="Joint"){
                           htext_1 += 'Joint</td><td>'
                       }
                       htext_1 += checkExist(detailobj1.committees[i].code)+'</td><td class="sidebarhid">'+checkExist(detailobj1.committees[i].name)+'</td></tr>';
                   }
                   htext_1 += '</table></td></tr>';
               }
               if(wh == "legislators"){
                   $("#committeeTable").html(htext_1);
               }
               else if(wh == "favorite"){
                   $("#fcommitteeTable").html(htext_1);
               }
           }
           function show_detail_info_table2(detailobj2,wh){
               if(detailobj2.length==0){
                   htext_2 = '<tr style="width:100%"><td><table><tr><th style="width:18%">Bill ID</th><th style="width:46%; margin-right: 2%">Title</th><th style="width:12%">Bill Type</th><th style="width:12%">Congress</th><th style="width:5%">Link</th></tr>';
               }
               else{
                   htext_2 = '<tr style="width:100%"><td><table><tr><th style="width:18%">Bill ID</th><th class="sidebarhid" style="width:46%; margin-right: 2%">Title</th><th class="sidebarhid" style="width:12%">Bill Type</th><th class="sidebarhid" style="width:12%">Congress</th><th style="width:5%">Link</th></tr>';
                   var bouns2 = Math.min(detailobj2.length,5);
                   for(var j=0;j<bouns2;j++){
                       htext_2 += '<tr style="border-top:1px solid lightgrey"><td>'+detailobj2[j].bill_id+'</td><td class="sidebarhid" style="padding-right:0.5%">';
                       htext_2 += checkExist(detailobj2[j].title)+'</td><td class="sidebarhid" style="padding-left:2%">';
                       htext_2 += checkExist(detailobj2[j].bill_type)+'</td><td class="sidebarhid">'+checkExist(detailobj2[j].congress)+'</td><td>'; if(detailobj2[j].hasOwnProperty("congressdotgov_url")){
                               htext_2 += '<a href="'+checkExist(detailobj2[j].congressdotgov_url)+'">Link</a>';
                       }
                       else{
                               htext_2 += 'N.A';
                       }
                   }
                   htext_2 += '</table></td></tr>';
               }
               if(wh == "legislators"){
                   $("#billTable").html(htext_2);
               }
               else if(wh == "favorite"){
                   $("#fbillTable").html(htext_2);
               }
           }
           function show_info_table(infoType){
               var legisBy;
               var legisFilter;
               if(infoType == "state"){
                   legisBy = "State";
                   legisFilter = '<select name="state" id="whichstate" ng-model="q.state_name"><option style="color:lightgray" value="" selected="selected">All State</option><option value="AL">Alabama</option><option value="AK">Alaska</option><option value="AZ">Arizona</option><option value="AR">Arkansas</option><option value="CA">California</option><option value="CO">Colorado</option><option value="CT">Connecticut</option><option value="DE">Delaware</option><option value="DC">District Of Columbia</option><option value="FL">Florida</option><option value="GA">Georgia</option><option value="HI">Hawaii</option><option value="ID">Idaho</option><option value="IL">Illinois</option><option value="IN">Indiana</option><option value="IA">Iowa</option><option value="KS">Kansas</option><option value="KY">Kentucky</option><option value="LA">Louisiana</option><option value="ME">Maine</option><option value="MD">Maryland</option><option value="MA">Massachusetts</option><option value="MI">Michigan</option><option value="MN">Minnesota</option><option value="MS">Mississippi</option><option value="MO">Missouri</option><option value="MT">Montana</option><option value="NE">Nebraska</option><option value="NV">Nevada</option><option value="NH">New Hampshire</option><option value="NJ">New Jersey</option><option value="NM">New Mexico</option><option value="NY">New York</option><option value="NC">North Carolina</option><option value="ND">North Dakota</option><option value="OH">Ohio</option><option value="OK">Oklahoma</option><option value="OR">Oregon</option><option value="PA">Pennsylvania</option><option value="RI">Rhode Island</option><option value="SC">South Carolina</option><option value="SD">South Dakota</option><option value="TN">Tennessee</option><option value="TX">Texas</option><option value="UT">Utah</option><option value="VT">Vermont</option><option value="VA">Virginia</option><option value="WA">Washington</option><option value="WV">West Virginia</option><option value="WI">Wisconsin</option><option value="WY">Wyoming</option></select>';
                   legisTable = '<div ng-controller="MyController" class="my-controller"><table class="table table-hover" style="margin-bottom:0;min-width:800px;width:98%"><thead><tr style="width:100%; font-size: 0.9em"><th style="width:16%">Party</th><th style="width:19%">Name</th><th style="width:17%">Chamber</th><th style="width:17%">District</th><th style="width:17%">State</th><th></th></tr></thead><tbody><tr><tr dir-paginate="x in resultList | filter:q.state_name:true | orderBy:[\'state_name\',\'last_name\'] | itemsPerPage:10" pagination-id="pagid1" current-page="currentPage" style="font-size:0.9em; height:5%"><td><img style="height:23px" src={{x.party}}></td><td>{{x.last_name+", "+x.first_name}}</td><td><img style="height:23px" src={{x.chamberimg}}>{{x.chamber}}</td><td>{{x.district}}</td><td>{{x.state}}</td><td style="text-align:right"><button type="button" id={{x.id}} onclick="slideTable(this.id,\'legislators\')" class="btn btn-primary" style="font-size: 0.8em">View Details</button></td></tr></tbody></table></div><div ng-controller="OtherController" class="other-controller" style="height:6%;width:95%"><div class="text-center"><dir-pagination-controls pagination-id="pagid1" boundary-links="true" on-page-change="pageChangeHandler(newPageNumber)"><ul class="pagination pagination-sm" style="margin:0" ng-if="1 < pages.length || !autoHide"><li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(1)">&laquo;</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(pagination.current - 1)">&lsaquo;</a></li><li ng-repeat="pageNumber in pages track by tracker(pageNumber, $index)" ng-class="{ active : pagination.current == pageNumber, disabled : pageNumber == "..." }"><a href="" ng-click="setCurrent(pageNumber)">{{ pageNumber }}</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.current + 1)">&rsaquo;</a></li><li ng-if="boundaryLinks"  ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.last)">&raquo;</a></li></ul></dir-pagination-controls></div></div>';
               }
               else if(infoType == "house"){
                   legisBy = "House";
                   legisFilter = '<input type="text" name="keyword" id="keyHouse" size="20" placeholder="Search" ng-model="p">';
                   legisTable = '<div ng-controller="MyController1" class="my-controller"><table class="table table-hover" style="min-width:800px;width:98%; margin-bottom:0"><thead><tr style="width:100%; font-size: 0.9em"><th style="width:16%">Party</th><th style="width:19%">Name</th><th style="width:17%">Chamber</th><th style="width:17%">District</th><th style="width:17%">State</th><th></th></tr></thead><tbody><tr><tr dir-paginate="x in resultList | filter:p | orderBy:\'last_name\' | itemsPerPage:10" pagination-id="pagid2" current-page="currentPage" style="font-size:0.9em; height:5%"><td><img style="height:23px" src={{x.party}}></td><td>{{x.last_name+", "+x.first_name}}</td><td><img style="height:23px" src={{x.chamberimg}}>{{x.chamber}}</td><td>{{x.district}}</td><td>{{x.state}}</td><td style="text-align:right"><button type="button" id={{x.id}} onclick="slideTable(this.id,\'legislators\')" class="btn btn-primary" style="font-size: 0.8em">View Details</button></td></tr></tbody></table></div><div ng-controller="OtherController1" class="other-controller" style="height:6%"><div class="text-center"><dir-pagination-controls pagination-id="pagid2" boundary-links="true" on-page-change="pageChangeHandler(newPageNumber)"><ul class="pagination pagination-sm" style="margin:0" ng-if="1 < pages.length || !autoHide"><li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(1)">&laquo;</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(pagination.current - 1)">&lsaquo;</a></li><li ng-repeat="pageNumber in pages track by tracker(pageNumber, $index)" ng-class="{ active : pagination.current == pageNumber, disabled : pageNumber == "..." }"><a href="" ng-click="setCurrent(pageNumber)">{{ pageNumber }}</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.current + 1)">&rsaquo;</a></li><li ng-if="boundaryLinks"  ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.last)">&raquo;</a></li></ul></dir-pagination-controls></div></div>';
               }
               else if(infoType == "senate"){
                   legisBy = "Senate";
                   legisFilter = '<input type="text" name="keyword" id="keySenate" size="20" placeholder="Search" ng-model="p">';
                   legisTable = '<div ng-controller="MyController2" class="my-controller"><table class="table table-hover" style="min-width:800px;width:98%; margin-bottom:0"><thead><tr style="width:100%; font-size: 0.9em"><th style="width:23%">Party</th><th style="width:20%">Name</th><th style="width:25%">Chamber</th><th style="width:20%">State</th><th></th></tr></thead><tbody><tr><tr dir-paginate="x in resultList | filter:p | orderBy:\'last_name\' | itemsPerPage:10" pagination-id="pagid3" current-page="currentPage" style="font-size:0.9em; height:5%"><td><img style="height:23px" src={{x.party}}></td><td>{{x.last_name+", "+x.first_name}}</td><td><img style="height:23px" src={{x.chamberimg}}>{{x.chamber}}</td><td>{{x.state}}</td><td style="text-align:right"><button type="button" id={{x.id}} onclick="slideTable(this.id,\'legislators\')" class="btn btn-primary" style="font-size: 0.8em">View Details</button></td></tr></tbody></table></div><div ng-controller="OtherController2" class="other-controller" style="height:6%"><div class="text-center"><dir-pagination-controls pagination-id="pagid3" boundary-links="true" on-page-change="pageChangeHandler(newPageNumber)"><ul class="pagination pagination-sm" style="margin:0" ng-if="1 < pages.length || !autoHide"><li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(1)">&laquo;</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(pagination.current - 1)">&lsaquo;</a></li><li ng-repeat="pageNumber in pages track by tracker(pageNumber, $index)" ng-class="{ active : pagination.current == pageNumber, disabled : pageNumber == "..." }"><a href="" ng-click="setCurrent(pageNumber)">{{ pageNumber }}</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.current + 1)">&rsaquo;</a></li><li ng-if="boundaryLinks"  ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.last)">&raquo;</a></li></ul></dir-pagination-controls></div></div>';
               }
               
               html_text = '<table id="tb_with_filter"><tr class="underLine" style="background-color:#F0F0F0"><td style="height：100%"><div id="tb_with_filter_lb"><b>Legislators By ' + legisBy + '</b></div></td><td><form id="filter_form" name="myform">' + legisFilter + '</form></td></tr></table>';
               html_text += '<div style="padding-left:1%;padding-right:2%;overflow-y: scroll">';
               html_text += legisTable;
               html_text += '</div>';
               if(infoType == "state"){
                   $("#state").html(html_text);
               }
               else if(infoType == "house"){
                   $("#house").html(html_text);
               }
               else if(infoType == "senate"){
                   $("#senate").html(html_text);
               }
               
           }
           function changeTab(whichTab){
               if(whichTab == "state"){
                   $("#bTab").val("state");
                   $("#whichstate").val("");
               }
               else if(whichTab == "house"){
                   $("#bTab").val("house");
                   $("#keyHouse").val("");                 
               }
               else if(whichTab == "senate"){
                   $("#bTab").val("senate");
                   $("#keySenate").val("");
               }
           }
           function show_bill_table(whichbilltable){
               var h = "";
               if(whichbilltable=="activebill"){
                   billBy = "Active Bills";
                   billFilter = '<input type="text" name="keyword" size="20" placeholder="Search" ng-model="b">';
                   billT = '<div class="container" style="width:95%" id="BillTabTableContainer"><div ng-controller="MyBillController" class="my-controller"><table class="table table-hover" style="min-width:800px;width:98%; margin-bottom:0"><thead><tr style="width:100%; font-size: 0.9em"><th style="width:12%">Bill ID</th><th style="width:12%">Bill Type</th><th class="sidebarhid" style="width:20%">Title</th><th style="width:12%">Chamber</th><th style="width:13%">Introducted On</th><th style="width:18%">Sponsor</th><th></th></tr></thead><tbody><tr><tr dir-paginate="x in resultList | filter:b | orderBy:\'-introduced_on\' | itemsPerPage:10" pagination-id="pagidb1" current-page="currentPage" style="font-size:0.9em; height:5%"><td>{{x.bill_id}}</td><td>{{x.bill_type}}</td><td class="sidebarhid">{{x.title}}</td><td><img style="height:23px" src={{x.chamberimg}}>{{x.chamber}}</td><td>{{x.introduced_date}}</td><td>{{x.sponsor_name}}</td><td style="text-align:right"><button type="button" id={{x.bill_id}} onclick="slideBillTable(this.id,\'bills\')" class="btn btn-primary" style="font-size: 0.8em">View Details</button></td></tr></tbody></table></div></div><div ng-controller="OtherBillController" class="other-controller" style="height:6%"><div class="text-center"><dir-pagination-controls pagination-id="pagidb1" boundary-links="true" on-page-change="pageChangeHandler(newPageNumber)"><ul class="pagination pagination-sm" style="margin:0" ng-if="1 < pages.length || !autoHide"><li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(1)">&laquo;</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(pagination.current - 1)">&lsaquo;</a></li><li ng-repeat="pageNumber in pages track by tracker(pageNumber, $index)" ng-class="{ active : pagination.current == pageNumber, disabled : pageNumber == "..." }"><a href="" ng-click="setCurrent(pageNumber)">{{ pageNumber }}</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.current + 1)">&rsaquo;</a></li><li ng-if="boundaryLinks"  ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.last)">&raquo;</a></li></ul></dir-pagination-controls></div></div>';
               }
               else if(whichbilltable=="newbill"){
                   billBy = "New Bills";
                   billFilter = '<input type="text" name="keyword" size="20" placeholder="Search" ng-model="b">';
                   billT = '<div class="container" style="width:95%" id="BillTabTableContainer1"><div ng-controller="MyBillController1" class="my-controller"><table class="table table-hover" style="min-width:800px;width:98%; margin-bottom:0"><thead><tr style="width:100%; font-size: 0.9em"><th style="width:12%">Bill ID</th><th style="width:12%">Bill Type</th><th class="sidebarhid" style="width:30%">Description</th><th style="width:12%">Chamber</th><th style="width:13%">Legislative Day</th><th></th></tr></thead><tbody><tr><tr dir-paginate="x in resultList | filter:b | orderBy:\'-legislative_day\' | itemsPerPage:10" pagination-id="pagidb2" current-page="currentPage" style="font-size:0.9em; height:5%"><td>{{x.bill_id}}</td><td>{{x.bill_type}}</td><td class="sidebarhid">{{x.description}}</td><td><img style="height:23px" src={{x.chamberimg}}>{{x.chamber}}</td><td>{{x.legislative_day}}</td><td style="text-align:right"><button type="button" id={{x.bill_id}} onclick="slideBillTable(this.id,\'bills\')" class="btn btn-primary" style="font-size: 0.8em">View Details</button></td></tr></tbody></table></div></div><div ng-controller="OtherBillController1" class="other-controller" style="height:6%"><div class="text-center"><dir-pagination-controls pagination-id="pagidb2" boundary-links="true" on-page-change="pageChangeHandler(newPageNumber)"><ul class="pagination pagination-sm" style="margin:0" ng-if="1 < pages.length || !autoHide"><li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(1)">&laquo;</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(pagination.current - 1)">&lsaquo;</a></li><li ng-repeat="pageNumber in pages track by tracker(pageNumber, $index)" ng-class="{ active : pagination.current == pageNumber, disabled : pageNumber == "..." }"><a href="" ng-click="setCurrent(pageNumber)">{{ pageNumber }}</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.current + 1)">&rsaquo;</a></li><li ng-if="boundaryLinks"  ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.last)">&raquo;</a></li></ul></dir-pagination-controls></div></div>';
               }
               h = '<table id="btb_with_filter"><tr class="underLine" style="background-color:#F0F0F0"><td style="height:6%"><div id="btb_with_filter_lb"><b>' + billBy + '</b></div></td><td><form style="margin-right: 5%;text-align: right">' + billFilter + '</form></td></tr></table>';
               h += '<div style="padding-left:1%;padding-right:2%;overflow-y: scroll">';
               h += billT;
               h += '</div>';
               if(whichbilltable=="activebill"){
                   $("#abills").html(h);
               }
               else if(whichbilltable=="newbill"){
                   $("#nbills").html(h);
               }
           }
           
           function show_committee_table(whichcomtable){
               var h = "";
               if(whichcomtable == "house"){
                   committeeBy = "House";
                   committeeFilter = '<input type="text" name="keyword" size="20" placeholder="Search" ng-model="c">';
                   committeeT = '<div class="container" style="width:95%" id="CommitteeTabTableContainer"><div ng-controller="MyCommitteeController" class="my-controller"><table class="table table-hover" style="min-width:800px;width:98%; margin-bottom:0"><thead><tr style="width:100%; font-size: 0.9em"><th style="width:5%"></th><th style="width:8%">Chamber</th><th style="width:11%">Committee ID</th><th style="width:45%">Name</th><th style="width:12%">Subcommittees</th><th style="width:8%">Chair State</th><th style="width:8%">Chair</th></tr></thead><tbody><tr><tr dir-paginate="x in resultList | filter:c | orderBy:\'id\' | itemsPerPage:10" pagination-id="pagidc1" current-page="currentPage" style="font-size:0.9em; height:5%">';
                   committeeT += '<td id={{x.id}}><button type="button" id=\'{{x.jsonstr}}\' class="btn btn-default btn-md" onclick="favorite2(this.id,1)"><i class="far fa-star" aria-hidden="true"></i></button></td>'
                   committeeT += '<td><img style="height:23px" src={{x.chamberimg}}>{{x.chamber}}</td><td>{{x.id}}</td><td>{{x.name}}</td><td>{{x.subcommittees}}</td><td>{{x.chair_state}}</td><td>{{x.chair}}</td></tr></tbody></table></div></div><div ng-controller="OtherCommitteeController" class="other-controller" style="height:6%"><div class="text-center"><dir-pagination-controls pagination-id="pagidc1" boundary-links="true" on-page-change="pageChangeHandler(newPageNumber)"><ul class="pagination pagination-sm" style="margin:0" ng-if="1 < pages.length || !autoHide"><li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(1)">&laquo;</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(pagination.current - 1)">&lsaquo;</a></li><li ng-repeat="pageNumber in pages track by tracker(pageNumber, $index)" ng-class="{ active : pagination.current == pageNumber, disabled : pageNumber == "..." }"><a href="" ng-click="setCurrent(pageNumber)">{{ pageNumber }}</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.current + 1)">&rsaquo;</a></li><li ng-if="boundaryLinks"  ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.last)">&raquo;</a></li></ul></dir-pagination-controls></div></div>';
               }
               else if(whichcomtable == "senate"){
                   committeeBy = "Senate";
                   committeeFilter = '<input type="text" name="keyword" size="20" placeholder="Search" ng-model="c">';
                   committeeT = '<div class="container" style="width:95%" id="CommitteeTabTableContainer"><div ng-controller="MyCommitteeController1" class="my-controller"><table class="table table-hover" style="min-width:800px;width:98%; margin-bottom:0"><thead><tr style="width:100%; font-size: 0.9em"><th style="width:5%"></th><th style="width:9%">Chamber</th><th style="width:12%">Committee ID</th><th style="width:60%">Name</th><th style="width:12%">Subcommittees</th></tr></thead><tbody><tr><tr dir-paginate="x in resultList | filter:c | orderBy:\'id\' | itemsPerPage:10" pagination-id="pagidc2" current-page="currentPage" style="font-size:0.9em; height:5%"><td id={{x.id}}><button type="button" id=\'{{x.jsonstr}}\' class="btn btn-default btn-md" onclick="favorite2(this.id,2)"><i class="far fa-star" aria-hidden="true"></i></button></td><td><img style="height:23px" src={{x.chamberimg}}>{{x.chamber}}</td><td>{{x.id}}</td><td>{{x.name}}</td><td>{{x.subcommittees}}</td></tr></tbody></table></div></div><div ng-controller="OtherCommitteeController1" class="other-controller" style="height:6%"><div class="text-center"><dir-pagination-controls pagination-id="pagidc2" boundary-links="true" on-page-change="pageChangeHandler(newPageNumber)"><ul class="pagination pagination-sm" style="margin:0" ng-if="1 < pages.length || !autoHide"><li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(1)">&laquo;</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(pagination.current - 1)">&lsaquo;</a></li><li ng-repeat="pageNumber in pages track by tracker(pageNumber, $index)" ng-class="{ active : pagination.current == pageNumber, disabled : pageNumber == "..." }"><a href="" ng-click="setCurrent(pageNumber)">{{ pageNumber }}</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.current + 1)">&rsaquo;</a></li><li ng-if="boundaryLinks"  ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.last)">&raquo;</a></li></ul></dir-pagination-controls></div></div>';
               }
               else if(whichcomtable == "joint"){
                   committeeBy = "Joint";
                   committeeFilter = '<input type="text" name="keyword" size="20" placeholder="Search" ng-model="c">';
                   committeeT = '<div class="container" style="width:95%" id="CommitteeTabTableContainer"><div ng-controller="MyCommitteeController2" class="my-controller"><table class="table table-hover" style="min-width:800px;width:98%; margin-bottom:0"><thead><tr style="width:100%; font-size: 0.9em"><th style="width:6%"></th><th style="width:14%">Chamber</th><th style="width:18%">Committee ID</th><th style="width:60%">Name</th></tr></thead><tbody><tr><tr dir-paginate="x in resultList | filter:c | orderBy:\'id\' | itemsPerPage:10" pagination-id="pagidc3" current-page="currentPage" style="font-size:0.9em; height:5%"><td id={{x.id}}><button type="button" id=\'{{x.jsonstr}}\' class="btn btn-default btn-md" onclick="favorite2(this.id,3)"><i class="far fa-star" aria-hidden="true"></i></button></td><td><img style="height:23px" src={{x.chamberimg}}>{{x.chamber}}</td><td>{{x.id}}</td><td>{{x.name}}</td></tr></tbody></table></div></div><div ng-controller="OtherCommitteeController2" class="other-controller" style="height:6%"><div class="text-center"><dir-pagination-controls pagination-id="pagidc3" boundary-links="true" on-page-change="pageChangeHandler(newPageNumber)"><ul class="pagination pagination-sm" style="margin:0" ng-if="1 < pages.length || !autoHide"><li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(1)">&laquo;</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(pagination.current - 1)">&lsaquo;</a></li><li ng-repeat="pageNumber in pages track by tracker(pageNumber, $index)" ng-class="{ active : pagination.current == pageNumber, disabled : pageNumber == "..." }"><a href="" ng-click="setCurrent(pageNumber)">{{ pageNumber }}</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.current + 1)">&rsaquo;</a></li><li ng-if="boundaryLinks"  ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.last)">&raquo;</a></li></ul></dir-pagination-controls></div></div>';
               }
               h = '<table id="ctb_with_filter"><tr class="underLine" style="background-color:#F0F0F0"><td style="height:6%"><div id="ctb_with_filter_lb"><b>' + committeeBy + '</b></div></td><td><form style="margin-right: 5%;text-align: right">' + committeeFilter + '</form></td></tr></table>';
               h += '<div style="padding-left:1%;padding-right:2%;overflow-y: scroll">';
               h += committeeT;
               h += '</div>';
               if(whichcomtable == "house"){
                   $("#ch").html(h);
               }
               else if(whichcomtable == "senate"){
                   $("#cs").html(h);
               }
               else if(whichcomtable == "joint"){
                   $("#cj").html(h);
               }
           }
           function refreshfavorite(delid,whichdb){
               deletefavorite(delid,whichdb);
               show_favorite_table("legislators");
               show_favorite_table("bills");
               show_favorite_table("committees");
           }
           function deletefavorite(delid,whichdb){
                var k = '"'+delid+'"';
                //alert(localStorage.length);
                localStorage.removeItem(k);
                //alert(localStorage.length);
                if(whichdb == "legislators"){
                    show_favorite_table("legislators");
                }
                else if(whichdb == "bills"){
                    show_favorite_table("bills");
                }
                else if(whichdb == "committees"){
                    show_favorite_table("committees");
                }
           }
           function show_favorite_table(whichdb){
               var h = "";
               if(whichdb == "legislators"){
                   //alert("begin");
                   fBy = " Legislators";
                   faT = '<table class="table table-hover" style="min-width:800px;width:98%; margin-bottom:0"><thead><tr style="width:100%; font-size: 0.9em"><th style="width:12%"></th><th style="width:12%">Image</th><th style="width:12%">Party</th><th style="width:15%">Name</th><th style="width:12%">Chamber</th><th style="width:8%">State</th><th style="width:17%">Email</th><th style="width:12%"></th></tr></thead><tbody>';
                   for(var i=0;i<localStorage.length;i++){
                       var temp = localStorage.key(i);
                       //alert(temp.charAt(1));
                       if(temp.charAt(1)=='l'){
                           //alert("yes");
                           var localstr = localStorage.getItem(localStorage.key(i));
                           //alert(localstr);
                           var localitem = JSON.parse(localstr);
                       
                           //alert("yes");
                           var lid = '\'l'+localitem[0].bioid+'\'';
                           faT += '<tr><td><button type="button" class="btn btn-default btn-md" onclick="refreshfavorite('+lid+',\'legislators\')"><i class="fa fa-trash" aria-hidden="true"></i></button></td><td><img style="height:28px" src="'+localitem[0].imgpath+'"></td>';
                           if(localitem[0].party == "R"){
                               faT += '<td><img style="height:25px" src="r.png"></td>';
                           }
                           else if(localitem[0].party == "D"){
                               faT += '<td><img style="height:25px" src="d.png"></td>';
                           }
                           else{
                               faT += '<td>N.A</td>'
                           }
                           faT += '<td>'+localitem[0].name+'</td>';
                           if(localitem[0].chamber == "House"){
                               faT += '<td><img style="height:23px" src="h.png">House</td>';
                           }
                           else if(localitem[0].chamber == "Senate"){
                               faT += '<td><img style="height:23px" src="s.svg">Senate</td>';
                           }
                           else if(localitem[0].chamber == "Joint"){
                               faT += '<td><img style="height:23px" src="s.svg">Joint</td>';
                           }
                           else{
                               faT += '<td>N.A</td>';
                           }
                           faT += '<td>'+localitem[0].state+'</td>';
                           
                           if(localitem[0].email != 'N.A'){
                               faT += '<td><a href="mailto:'+localitem[0].email+'">'+localitem[0].email+'</a></td>';
                           }
                           else{
                               faT += '<td>N.A</td>';
                           }
                           faT += '<td><button type="button" id="'+localitem[0].bioid+'" onclick="slideTable(this.id,\'favorite\')" class="btn btn-primary" style="font-size: 0.8em">View Details</button></td></tr>';
                       }
                   }
                   faT += '</tbody></table>';
               }
               else if(whichdb == "bills"){
                   fBy = " Bills";
                   faT = '<table class="table table-hover" style="min-width:800px;width:98%; margin-bottom:0"><thead><tr style="width:100%; font-size: 0.9em"><th style="width:6%"></th><th style="width:12%">Bill ID</th><th style="width:10%">Bill Type</th><th style="width:18%">Title</th><th style="width:12%">Chamber</th><th style="width:15%">Introduced On</th><th style="width:15%">Sponsor</th><th style="width:12%"></th></tr></thead><tbody>';
                   for(var i=0;i<localStorage.length;i++){
                       var temp = localStorage.key(i);
                       //alert(temp.charAt(1));
                       if(temp.charAt(1)=='b'){
                           //alert("yes");
                           var localstr = localStorage.getItem(localStorage.key(i));
                           //alert(localstr);
                           var localitem = JSON.parse(localstr);
                       
                           //alert("yes");
                           var bid = '\'b'+localitem[0].billid+'\'';
                           faT += '<tr><td><button type="button" class="btn btn-default btn-md" onclick="refreshfavorite('+bid+',\'bills\')"><i class="fa fa-trash" aria-hidden="true"></i></button></td><td>'+localitem[0].billid+'</td>';
                           faT += '<td>'+localitem[0].bill_type+'</td>';
                           faT += '<td>'+localitem[0].official_title+'</td>';
                           if(localitem[0].chamber == "house"){
                               faT += '<td><img style="height:23px" src="h.png">House</td>';
                           }
                           else if(localitem[0].chamber == "senate"){
                               faT += '<td><img style="height:23px" src="s.svg">Senate</td>';
                           }
                           else if(localitem[0].chamber == "joint"){
                               faT += '<td><img style="height:23px" src="s.svg">Joint</td>';
                           }
                           else{
                               faT += '<td>N.A</td>';
                           }
                           faT += '<td>'+localitem[0].introduced_on+'</td>';
                           faT += '<td>'+localitem[0].sponsor+'</td>';
                           faT += '<td><button type="button" id="'+localitem[0].billid+'" onclick="slideBillTable(this.id,\'favorite\')" class="btn btn-primary" style="font-size: 0.8em">View Details</button></td></tr>';
                       }
                   }
                   faT += '</tbody></table>';
               }
               else if(whichdb == "committees"){
                   fBy = " Committees";
                   faT = '<table class="table table-hover" style="min-width:800px;width:98%; margin-bottom:0"><thead><tr style="width:100%; font-size: 0.9em"><th style="width:7%"></th><th style="width:10%">Chamber</th><th style="width:12%">Committee ID</th><th style="width:30%">Name</th><th style="width:20%">Chair</th><th style="width:15%">Sub Committee</th></tr></thead><tbody>';
                   for(var i=0;i<localStorage.length;i++){
                       var temp = localStorage.key(i);
                       //alert(temp.charAt(1));
                       if(temp.charAt(1)=='c'){
                           //alert("yes");
                           var localstr = localStorage.getItem(localStorage.key(i));
                           //alert(localstr);
                           var localitem = JSON.parse(localstr);
                       
                           //alert("yes");
                           var bid = '\'c'+localitem[0].comid+'\'';
                           faT += '<tr><td><button type="button" class="btn btn-default btn-md" onclick="refreshfavorite('+bid+',\'committees\')"><i class="fa fa-trash" aria-hidden="true"></i></button></td>';
                           if(localitem[0].chamber == "House"){
                               faT += '<td><img style="height:23px" src="h.png">House</td>';
                           }
                           else if(localitem[0].chamber == "Senate"){
                               faT += '<td><img style="height:23px" src="s.svg">Senate</td>';
                           }
                           else if(localitem[0].chamber == "Joint"){
                               faT += '<td><img style="height:23px" src="s.svg">Joint</td>';
                           }
                           else{
                               faT += '<td>N.A</td>';
                           }
                           faT += '<td>'+localitem[0].comid+'</td>';
                           faT += '<td>'+localitem[0].name+'</td>';
                           faT += '<td>'+localitem[0].parent_committee+'</td>';
                           //alert(localitem[0].parent_committee);
                           faT += '<td>'+localitem[0].sub_committee+'</td>';
                           faT += '</tr>';
                       }
                   }
                   faT += '</tbody></table>';
               }
               h = '<table id="ftb_with_filter"><tr class="underLine" style="background-color:#F0F0F0"><td style="height:6%"><div id="ftb_with_filter_lb"><b>Favorite' + fBy + '</b></div></td></tr></table>';
               h += '<div style="padding-left:1%;padding-right:2%;overflow-y: scroll">';
               h += faT;
               h += '</div>';
               if(whichdb == "legislators"){
                   $("#fl").html(h);
                   //alert("change");
               }
               else if(whichdb == "bills"){
                   $("#fb").html(h);
               }
               else if(whichdb == "committees"){
                   $("#fc").html(h);
               }
           }
           
           function changeDatabase(whichdb){
               document.getElementById("db").value = whichdb;
               if(whichdb == "legislators"){
                   document.getElementById("dbheader").innerHTML = "Legislators";
               }
               else if(whichdb == "bills"){
                   $("#dbheader").html('Bills');
               }
               else if(whichdb == "committees"){
                   $("#dbheader").html("Committees");
               }
               else if(whichdb == "favorites"){
                   $("#dbheader").html("Favorites");
               }
           }
           function favorite(fid,imgpath,party,name,chamber,state,em,d){
               if(d==0){
                   var id = '\''+fid+'\'';
                   var img = '\''+imgpath+'\'';
                   var pa = '\'' + party +'\'';
                   var na = '\'' + name +'\'';
                   var cham = '\'' + chamber +'\'';
                   var sta = '\'' + state +'\'';
                   var email = '\'' + em +'\'';
                   $("#lfavbtn").html('<button type="button" class="btn btn-default btn-md" id="yellowstar" onclick="unfavorite('+id+','+img+','+pa+','+na+','+cham+','+sta+','+email+',0)"><i class="fas fa-star icon_b" aria-hidden="true"></i></button>');
                   var Obj1 = [];
                   var item = {};
                   item["bioid"] = fid;
                   item["imgpath"] = imgpath;
                   item["party"] = party;
                   item["name"] = name;
                   item["chamber"] = chamber;
                   item["state"] = state;
                   item["email"] = em;
                   Obj1.push(item);
                   var k = '"l'+fid+'"';
                   //alert(k);
                   var jsonString = JSON.stringify(Obj1);
                   localStorage.setItem(k,jsonString);
                   var t = localStorage.getItem(k);
                   //alert(t);
               }
           }
           function favorite1(fid,btype,oftitle,cham,introducedon,spon){
               var id = '\''+fid+'\'';
               var billtype = '\''+btype+'\'';
               var officialtitle = '\'' + oftitle +'\'';
               var chamber = '\'' + cham +'\'';
               var introon = '\'' + introducedon +'\'';
               var sponsor = '\'' + spon +'\'';
               $("#favbtnb1").html('<button type="button" class="btn btn-default btn-md" id="yellowstar" onclick="unfavorite1('+id+','+billtype+','+officialtitle+','+chamber+','+introon+','+sponsor+')"><i class="fas fa-star icon_b" aria-hidden="true"></i></button>');
               $("#favbtn1").html('<button type="button" class="btn btn-default btn-md" id="yellowstar" onclick="unfavorite1('+id+','+billtype+','+officialtitle+','+chamber+','+introon+','+sponsor+')"><i class="fas fa-star icon_b" aria-hidden="true"></i></button>');
               var Obj1 = [];
               var item = {};
               item["billid"] = fid;
               item["bill_type"] = btype;
               item["official_title"] = oftitle;
               item["chamber"] = cham;
               item["introduced_on"] = introducedon;
               item["sponsor"] = spon;
               Obj1.push(item);
               var k = '"b'+fid+'"';
               //alert(k);
               var jsonString = JSON.stringify(Obj1);
               localStorage.setItem(k,jsonString);
           }
           function favorite2(tid,i){
               var jobj = JSON.parse(tid);
               //alert(jobj[0].comid);
               var id = '\''+jobj[0].comid+'\'';
               var chamber = '\''+jobj[0].chamber+'\'';
               var name = '\'' + jobj[0].name +'\'';
               var parcom = '\'' + jobj[0].parent_committee +'\'';
               var subcom = '\'' + jobj[0].sub_committee +'\'';
               var t_id = "'"+JSON.stringify(jobj)+"'";
               var key = '#'+jobj[0].comid;
               //alert(t_id);
               if(i == 1){
                   $(key).html('<button type="button" class="btn btn-default btn-md" id='+t_id+' onclick="unfavorite2(this.id,1)"><i class="fas fa-star icon_b" aria-hidden="true"></i></button>');
               }
               else if(i == 2){
                   $(key).html('<button type="button" class="btn btn-default btn-md" id='+t_id+' onclick="unfavorite2(this.id,2)"><i class="fas fa-star icon_b" aria-hidden="true"></i></button>');
               }
               else if(i == 3){
                   $(key).html('<button type="button" class="btn btn-default btn-md" id='+t_id+' onclick="unfavorite2(this.id,3)"><i class="fas fa-star icon_b" aria-hidden="true"></i></button>');
               }
               var Obj1 = [];
               var item = {};
               item["comid"] = jobj[0].comid;
               item["chamber"] = jobj[0].chamber;
               item["name"] = jobj[0].name;
               item["parent_committee"] = jobj[0].parent_committee;
               item["sub_committee"] = jobj[0].sub_committee;
               Obj1.push(item);
               var k = '"c'+jobj[0].comid+'"';
               //alert(k);
               var jsonString = JSON.stringify(Obj1);
               localStorage.setItem(k,jsonString);
               var t = localStorage.getItem(k);
               //alert(t);
           }
           function unfavorite2(tid,i){
               var jobj = JSON.parse(tid);
               var key = '#'+jobj[0].comid;
               var t_id = "'"+JSON.stringify(jobj)+"'";
               if(i ==1){
                   var c = '<button type="button" class="btn btn-default btn-md" id='+t_id+' onclick="favorite2(this.id,1)"><i class="far fa-star" aria-hidden="true"></i></button>';
                   $(key).html(c);
               }
               else if(i == 2){
                   var c = '<button type="button" class="btn btn-default btn-md" id='+t_id+' onclick="favorite2(this.id,2)"><i class="far fa-star" aria-hidden="true"></i></button>';
                   $(key).html(c);
               }
               else if(i == 3){
                   var c = '<button type="button" class="btn btn-default btn-md" id='+t_id+' onclick="favorite2(this.id,3)"><i class="far fa-star" aria-hidden="true"></i></button>';
                   $(key).html(c);
               }
               var k = '"c'+jobj[0].comid+'"';
               //alert(localStorage.length);
               localStorage.removeItem(k);
               //alert(localStorage.length);
           }
           function unfavorite1(fid,btype,oftitle,cham,introducedon,spon){
               var id = '\''+fid+'\'';
               var billtype = '\''+btype+'\'';
               var officialtitle = '\'' + oftitle +'\'';
               var chamber = '\'' + cham +'\'';
               var introon = '\'' + introducedon +'\'';
               var sponsor = '\'' + spon +'\'';
               var c = '<button type="button" class="btn btn-default btn-md" onclick="favorite1('+id+','+billtype+','+officialtitle+','+chamber+','+introon+','+sponsor+')"><i class="far fa-star" aria-hidden="true"></i></button>';
               $("#favbtnb1").html(c);
               $("#favbtn1").html(c);
               var k = '"b'+fid+'"';
               //alert(localStorage.length);
               localStorage.removeItem(k);
               //alert(localStorage.length);
           }
           function unfavorite(fid,imgpath,party,name,chamber,state,em,b){
               if(b==0){
                   var id = '\''+fid+'\'';
                   var img = '\''+imgpath+'\'';
                   var pa = '\'' + party +'\'';
                   var na = '\'' + name +'\'';
                   var cham = '\'' + chamber +'\'';
                   var sta = '\'' + state +'\'';
                   var email = '\'' + em +'\'';
                   var c = '<button type="button" class="btn btn-default btn-md" onclick="favorite('+id+','+img+','+pa+','+na+','+cham+','+sta+','+email+',0)"><i class="far fa-star" aria-hidden="true"></i></button>';
                   $("#lfavbtn").html(c);
                   $("#favbtn").html(c);
                   var k = '"l'+fid+'"';
                   //alert(localStorage.length);
                   localStorage.removeItem(k);
                   //alert(localStorage.length);
               }
           }
       </script>
       <!-- HTML5 Shim 和 Respond.js 用于让 IE8 支持 HTML5元素和媒体查询 -->
       <!-- 注意： 如果通过 file://  引入 Respond.js 文件，则该文件无法起效果 -->
       <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
          <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
       <![endif]-->
   </head>
   <body>
       <script>//localStorage.clear();</script>
       <!-- Page Header -->
       <div id="flheader"><table style="width: 100%; margin-top: 5px; vertical-align: center;z-index=999">
           <tr style="height: 38px">
               <td style="padding-left: 2%">
                   <a id="menu-toggle" href="#menu-toggle"><i class="fa fa-bars" aria-hidden="true" style="color:black"></i></a>
               </td>
               <td style="padding-bottom: 1.5%">
                   <table id="logoHeader" style="text-align: center">
                       <tr style="height: 25px">
                           <td style="padding-top: 4px"><a href="https://www.propublica.org/datastore/api/propublica-congress-api"><img src="logo.png" height="16px"></a></td>
                           <td id="congressAPI"><b>&nbsp;Congress API</b></td>
                       </tr>
                   </table>
               </td>
           </tr>
       </table></div>
       
       <!-- Page Content -->
       <div id="wrapper">
           <!-- Sidebar Navigation -->
           <div id="nav_wrapper">
               <ul id="nav" role="tablist">
                   <li role="presentation" class="active"><a href="#legisdb" role="tab" data-toggle="tab" onclick="changeDatabase('legislators')"><i class="fa fa-user" aria-hidden="true"></i><span class="sidebarhid">&nbsp;&nbsp;Legislators</span></a></li>
                   <li role="presentation"><a href="#billdb" role="tab" data-toggle="tab" onclick="changeDatabase('bills')"><i class="fas fa-file-alt" aria-hidden="true"></i><span class="sidebarhid">&nbsp;&nbsp; Bills</span></a></li>
                   <li role="presentation"><a href="#committeedb" role="tab" data-toggle="tab" onclick="changeDatabase('committees')"><i class="fas fa-university" aria-hidden="true"></i><span class="sidebarhid">&nbsp;&nbsp;Committees</span></a></li>
                   <li role="presentation"><a href="#favoritedb" role="tab" data-toggle="tab" id="showf"><i class="fa fa-star" aria-hidden="true"></i><span class="sidebarhid">&nbsp;&nbsp;Favorites</span></a></li>
                   <script>
                       $("#showf").click(function(e){
                           e.preventDefault();
                           show_favorite_table("legislators");
                           show_favorite_table("bills");
                           show_favorite_table("committees");
                       });
                   </script>
               </ul>
           </div>
           <!-- Information Table -->   
           <div id="infoContent"><table style="width:100%; height:100%">
               <tr>
                   <td class="congress_type underLine">
                       <h3 id="dbheader">Legislators</h3>
                   </td>
               </tr>
               <tr style="height:92%">
                   <td style="height:auto">
                       <div class="tab-content" style="height:auto"><div role="tabpanel" class="tab-pane active" id="legisdb" style="height:auto"><div id="carouselleg" class="carousel slide" data-ride="carousel" style="height:auto" data-interval="false">
                           <div class="carousel-inner" role="listbox" style="height:auto">
                               <div class="item active table_top shadowed_box" style="padding-bottom:2%;height:auto;margin-right:2%;box-sizing:border-box"><div>
                                   <ul class="nav nav-tabs" role="tablist" id="myTab">
                                       <li role="presentation" class="active"><a id="byState" href="#state" role="tab" data-toggle="tab"><span id="bst" style="color:black">By State</span></a></li>
                                       <li role="presentation"><a id="byHouse" href="#house" role="tab" data-toggle="tab"><span id="bh" style="color:#DCDCDC">House</span></a></li>
                                       <li role="presentation"><a id="bySenate" href="#senate" role="tab" data-toggle="tab"><span id="bse" style="color:#DCDCDC">Senate</span></a></li>
                                       <script>
                                           $("#byState").click(function(e){
                                               e.preventDefault();
                                               $("#bst").css({"color": "black"});
                                               $("#bh").css({'color': '#DCDCDC'});
                                               $("#bse").css({'color': '#DCDCDC'});
                                           });
                                           $("#byHouse").click(function(e){
                                               e.preventDefault();
                                               $("#bst").css({'color': '#DCDCDC'});
                                               $("#bh").css({'color': 'black'});
                                               $("#bse").css({'color': '#DCDCDC'});
                                           });
                                           $("#bySenate").click(function(e){
                                               e.preventDefault();
                                               $("#bst").css({'color': '#DCDCDC'});
                                               $("#bh").css({'color': '#DCDCDC'});
                                               $("#bse").css({'color': 'black'});
                                           });
                                       </script>
                                   </ul>
                                   </div>
                                   <!-- Tab panes -->
                                   <div class="tab-content" id="myTabContent" style="height:auto">
                                       <div role="tabpanel" class="tab-pane active" id="state" style="height:100%;margin-right:2%;box-sizing:border-box;width:100%">
                                           <script>
                                               show_info_table("state");
                                           </script>
                                       </div>
                                       <div role="tabpanel" class="tab-pane" id="house" style="height:100%;margin-right:2%;box-sizing:border-box;width:100%">
                                           <script>show_info_table("house");</script>
                                       </div>
                                       <div role="tabpanel" class="tab-pane" id="senate" style="height:100%;box-sizing:border-box">
                                           <script>show_info_table("senate");</script>
                                       </div>
                                   </div>
                               </div>
                               <div class="item" style="height:100%">
                                   <table class="table_top shadowed_box">
                                       <tr class="detailLine underLine">
                                           <td style="padding-left:1%;width:50%;vertical-align:center">
                                               <button type="button" class="btn btn-default btn-md" onclick="detailBack()">
                                                   <i class="fas fa-angle-left" aria-hidden="true"></i>
                                               </button><span style="font-size:1.5em;">    Details</span>
                                           </td>
                                           <td style="text-align:right; padding-right:1%; width:50%" id="lfavbtn">
                                           </td>
                                       </tr>
                                       <tr><td colspan="2"><div class="container-fluid" style="width:100%">
                                           <div class="row">
                                               <div class="col-xs-12 col-lg-6 detailInTable upLine">
                                                   <table style="width:100%">
                                                       <tr><td style="width:100%">
                                                           <div class="row" style="width:100%;margin-left:0;margin-bottom:1%">
                                                               <div class="col-xs-12 col-lg-6" id="detailImgTable"></div>
                                                               <div class="col-xs-12 col-lg-6" id="dInfoTable"></div>
                                                           </div>
                                                       </td></tr>
                                                       <tr style="border-top:0"><td id="detailotherInfo" colspan="2"></td></tr>
                                                   </table>
                                               </div>
                                           
                                               <div class="col-xs-12 col-lg-6">
                                                   <table style="width:100%;height:100%">
                                                       <tr><td style="vertical-align:top;height:auto">
                                                           <span style="font-size:1.3em">Committees</span>
                                                           <table id="committeeTable">
                                                           </table>
                                                       </td></tr>
                                                       <tr><td style="vertical-align:top">
                                                           <span style="font-size:1.3em">Bills</span>
                                                           <table id="billTable">
                                                           </table>
                                                       </td></tr>
                                                   </table>
                                               </div>
                                            </div>
                                           </div></td></tr>
                                   </table>
                                   
                               </div>
                           </div>
                       </div></div>
                       <div role="tabpanel" class="tab-pane" id="billdb" style="height:auto">
                           <div id="carouselbill" class="carousel slide" data-ride="carousel" style="height:auto" data-interval="false">
                               <div class="carousel-inner" role="listbox" style="vertical-align:top;height:auto">
                                   <div class="item active table_top shadowed_box" style="padding-bottom:2%;height:auto">
                                       <ul class="nav nav-tabs" role="tablist" id="myTabb">
                                           <li role="presentation" class="active"><a id="activeBills" style="color: #DCDCDC; font-size: 0.8em" href="#abills" role="tab" data-toggle="tab"><span id="abi" style="color:black">Active Bills</span></a></li>
                                           <li role="presentation"><a id="newBills" style="color: #DCDCDC; font-size: 0.8em" href="#nbills" role="tab" data-toggle="tab"><span id="nbi">New Bills</span></a></li>
                                           <script>
                                               $("#activeBills").click(function(e){
                                               e.preventDefault();
                                               $("#abi").css({"color": "black"});
                                               $("#nbi").css({'color': '#DCDCDC'});
                                           });
                                           $("#newBills").click(function(e){
                                               e.preventDefault();
                                               $("#abi").css({'color': '#DCDCDC'});
                                               $("#nbi").css({'color': 'black'});
                                           });
                                           </script>
                                       </ul>
                                       <!-- Tab panes -->
                                       <div class="tab-content" id="mybillTabContent" style="height:auto">
                                           <div role="tabpanel" class="tab-pane active" id="abills" style="height:100%">
                                               <script>show_bill_table("activebill");</script>
                                           </div>
                                           <div role="tabpanel" class="tab-pane" id="nbills" style="height:100%">
                                               <script>show_bill_table("newbill");</script>
                                           </div>
                                       </div>
                                   </div>
                                   <div class="item" style="vertical-align:top">
                                       <table class="table_top shadowed_box">
                                           <tr class="detailLine underLine">
                                               <td style="padding-left:1%;width:50%;vertical-align:center">
                                                   <button type="button" class="btn btn-default btn-md" onclick="billdetailBack()">
                                                       <i class="fas fa-angle-left" aria-hidden="true"></i>
                                                   </button><span style="font-size:1.5em;">    Details</span>
                                               </td>
                                               <td style="text-align:right; padding-right:1%; width:50%" id="favbtn1">
                                               </td>
                                           </tr>
                                           <tr style="width:100%"><td style="width:100%" colspan="2"><div class="container-fluid" style="width:100%"><div class="row">
                                               <div class="col-md-6 col-xs-12 upLine" id="billdetailTable" style="vertical-align:top">
                                               </div>
                                               <div class="col-md-6 col-xs-12" id="billpdf">
                                               </div>
                                           </div></div></td></tr>
                                       </table>
                                   </div>
                               </div>
                           </div>
                       </div>
                       <div role="tabpanel" class="tab-pane" id="committeedb" style="height:auto;vertical-align:top">
                                   <div class="item active table_top shadowed_box" style="margin-top:2%;padding-bottom:1%; height:auto">
                                       <ul class="nav nav-tabs" role="tablist" id="myTabc">
                                           <li role="presentation" class="active"><a id="chouse" style="color: #DCDCDC; font-size: 0.8em" href="#ch" role="tab" data-toggle="tab"><span id="hcom" style="color:black">House</span></a></li>
                                           <li role="presentation"><a id="csenate" style="color: #DCDCDC; font-size: 0.8em" href="#cs" role="tab" data-toggle="tab"><span id="scom">Senate</span></a></li>
                                           <li role="presentation"><a id="cjoint" style="color: #DCDCDC; font-size: 0.8em" href="#cj" role="tab" data-toggle="tab"><span id="jcom">Joint</span></a></li>
                                           <script>
                                               $("#chouse").click(function(e){
                                               e.preventDefault();
                                               $("#hcom").css({"color": "black"});
                                               $("#scom").css({'color': '#DCDCDC'});
                                               $("#jcom").css({'color': '#DCDCDC'});
                                           });
                                           $("#csenate").click(function(e){
                                               e.preventDefault();
                                               $("#hcom").css({'color': '#DCDCDC'});
                                               $("#scom").css({'color': 'black'});
                                               $("#jcom").css({'color': '#DCDCDC'});
                                           });
                                               $("#cjoint").click(function(e){
                                               e.preventDefault();
                                               $("#hcom").css({'color': '#DCDCDC'});
                                               $("#scom").css({'color': '#DCDCDC'});
                                               $("#jcom").css({'color': 'black'});
                                           });
                                           </script>
                                       </ul>
                                       <!-- Tab panes -->
                                       <div class="tab-content" id="mycommitteeTabContent" style="margin-bottom:2%;height:auto">
                                           <div role="tabpanel" class="tab-pane active" id="ch" style="height:100%">
                                               <script>show_committee_table("house");</script>
                                           </div>
                                           <div role="tabpanel" class="tab-pane" id="cs" style="height:100%">
                                               <script>show_committee_table("senate");</script>
                                           </div>
                                           <div role="tabpanel" class="tab-pane" id="cj" style="height:100%">
                                               <script>show_committee_table("joint");</script>
                                           </div>
                                       </div>
                                   </div>
                       </div>
                       <div role="tabpanel" class="tab-pane" id="favoritedb" style="height:auto;vertical-align:top">
                           <div id="carouselfav" class="carousel slide" data-ride="carousel" style="height:auto" data-interval="false">
                               <div class="carousel-inner" role="listbox" style="vertical-align:top">
                                   <div class="item active table_top shadowed_box" style="padding-bottom:2%;height:auto">
                                       <ul class="nav nav-tabs" role="tablist" id="myTabf">
                                           <li role="presentation" class="active"><a id="flegis" style="color: #DCDCDC; font-size: 0.8em" href="#fl" role="tab" data-toggle="tab"><span id="fale" style="color:black">Legislators</span></a></li>
                                           <li role="presentation"><a id="fbills" style="color: #DCDCDC; font-size: 0.8em" href="#fb" role="tab" data-toggle="tab"><span id="fabi">Bills</span></a></li>
                                           <li role="presentation"><a id="fcommittees" style="color: #DCDCDC; font-size: 0.8em" href="#fc" role="tab" data-toggle="tab"><span id="faco">Committees</span></a></li>
                                           <script>
                                               $("#flegis").click(function(e){
                                               e.preventDefault();
                                               $("#fale").css({"color": "black"});
                                               $("#fabi").css({'color': '#DCDCDC'});
                                               $("#faco").css({'color': '#DCDCDC'});
                                           });
                                           $("#fbills").click(function(e){
                                               e.preventDefault();
                                               $("#fale").css({'color': '#DCDCDC'});
                                               $("#fabi").css({'color': 'black'});
                                               $("#faco").css({'color': '#DCDCDC'});
                                           });
                                           $("#fcommittees").click(function(e){
                                               e.preventDefault();
                                               $("#fale").css({'color': '#DCDCDC'});
                                               $("#fabi").css({'color': '#DCDCDC'});
                                               $("#faco").css({'color': 'black'});
                                           });
                                           </script>
                                       </ul>
                                       <!-- Tab panes -->
                                       <div class="tab-content" id="myfavoriteTabContent">
                                           <div role="tabpanel" class="tab-pane active" id="fl" style="height:100%">
                                               <script>show_favorite_table("legislators");</script>
                                           </div>
                                           <div role="tabpanel" class="tab-pane" id="fb" style="height:100%">
                                               <script>show_favorite_table("bills");</script>
                                           </div>
                                           <div role="tabpanel" class="tab-pane" id="fc" style="height:100%">
                                               <script>show_favorite_table("committees");</script>
                                           </div>
                                       </div>
                                   </div>
                                   <div class="item" style="height:100%">
                                       <table class="table_top shadowed_box" id="favdetail">
                                           <tr class="detailLine underLine">
                                               <td style="padding-left:1%;width:50%;vertical-align:center">
                                                   <button type="button" class="btn btn-default btn-md" onclick="favdetailBack()">
                                                       <i class="fas fa-angle-left" aria-hidden="true"></i>
                                                   </button><span style="font-size:1.5em;">    Details</span>
                                               </td>
                                               <td style="text-align:right; padding-right:1%; width:50%" id="favbtn">
                                                   <button type="button" id="star_btn" class="btn btn-default btn-md" onclick="favorite(0)">
                                                       <i class="far fa-star" aria-hidden="true"></i>
                                                   </button>
                                               </td>
                                           </tr>
                                           <tr>
                                               <td class="detailInTable upLine">
                                                   <table style="width:100%">
                                                       <tr>
                                                           <td id="fdetailImgTable"></td>
                                                           <td id="fdInfoTable"></td>
                                                       </tr>
                                                       <tr style="border-top:0"><td id="fdetailotherInfo" colspan="2"></td></tr>
                                                   </table>
                                               </td>
                                               <td style="width:50%">
                                                   <table style="width:100%;height:100%">
                                                       <tr><td style="vertical-align:top;height:auto">
                                                           <span style="font-size:1.3em">Committees</span>
                                                           <table id="fcommitteeTable">
                                                           </table>
                                                       </td></tr>
                                                       <tr><td style="vertical-align:top">
                                                           <span style="font-size:1.3em">Bills</span>
                                                           <table id="fbillTable">
                                                           </table>
                                                       </td></tr>
                                                   </table>
                                               </td>
                                           </tr>
                                       </table>
                                   </div>
                               </div>
                           </div>
                       </div>
                       </div>
                   </td>
               </tr>
           </table></div>
       </div>     
           
       <script>
           $("#menu-toggle").click(function(e) {
               e.preventDefault();
               $("#wrapper").toggleClass("toggled");
           });
           var myApp = angular.module('myApp', ['angularUtils.directives.dirPagination']);
           
           function MyController($scope,$http) {
                  $scope.currentPage = 1;
                  $scope.pageSize = 10;
                  var url = 'http://congressphp-env.pn3iidvwsk.us-east-2.elasticbeanstalk.com/infoprecess.php?datab=legislators&byTab=state&state=all';
                  $http.get(url)
                      .success(function(data){
                      $scope.total = data.length;
                      $.each(data,function(i,d){
                          if(d.hasOwnProperty('party')){
                               if(d.party == "R"){
                                   d.party = 'r.png';
                               }
                               else if(d.party == "D"){
                                   d.party = 'd.png';
                               }
                               else{
                                   d.party = 'N.A';
                               }
                          }
                          else{
                              d.party = 'N.A';
                          }

                          if(d.hasOwnProperty('lis_id')){
														   d.chamber= 'Senate';
                               d.chamberimg = 's.svg';
													} else if(d.hasOwnProperty('geoid')){
														   d.chamber= 'House';
                               d.chamberimg = 'h.png';
													} else{
                                   d.chamber = 'N.A';
                          }

                          if(d.hasOwnProperty('district')){
                               if(d.district != null){
                                   d.district= 'District ' + d.district;
                               }
                               else{
                                   d.district = 'N.A';
                               }
                          }
                          else{
                               d.district = 'N.A';
                          }

                          if(d.hasOwnProperty('state')){
                               d.state = d.state;
                           }
                          else{
                               d.state = 'N.A';
                           }
                      });
                      $scope.resultList = data;
                      //showData(data);
                      //alert(Object.keys(data.results).length);
                  }).error(function(data){
                      alert("error");
                  });
                  
                  $scope.pageChangeHandler = function(num) {
                      console.log('meals page changed to ' + num);
                  };
                  $scope.stateLists = [{name: 'All'},
                                       {name: 'Alabama',value: 'Alabama'},
                                       {name: 'Alaska',value: 'Alaska'},
                                       {name: 'Arizona',value: 'Arizona'},
                                       {name: 'Arkansas',value: 'Arkanasas'},
                                       {name: 'California',value: 'California'},
                                       {name: 'Colorado',value: 'Colorado'},
                                       {name: 'Connecticut',value: 'Connecticut'},
                                       {name: 'Delaware',value: 'Delaware'},
                                       {name: 'District Of Columbia',value: 'District Of Columbia'},
                                       {name: 'Florida',value: 'Florida'},
                                       {name: 'Georgia',value: 'Georgia'},
                                       {name: 'Hawaii',value: 'Hawaii'},
                                       {name: 'Idaho',value: 'Idaho'},
                                       {name: 'Illinois',value: 'Illinois'},
                                       {name: 'Indiana',value: 'Indiana'},
                                       {name: 'Iowa',value: 'Iowa'},
                                       {name: 'Kansas',value: 'Kansas'},
                                       {name: 'Kentucky',value: 'Kentucky'},
                                       {name: 'Louisiana',value: 'Louisiana'},
                                       {name: 'Maine',value: 'Maine'},
                                       {name: 'Maryland',value: 'Maryland'},
                                       {name: 'Massachusetts',value: 'Massachusetts'},
                                       {name: 'Michigan',value: 'Michigan'},
                                       {name: 'Minnesota',value: 'Minnesota'},
                                       {name: 'Mississippi',value: 'Mississippi'},
                                       {name: 'Missouri',value: 'Missouri'},
                                       {name: 'Montana',value: 'Montana'},
                                       {name: 'Nebraska',value: 'Nebraska'},
                                       {name: 'Nevada',value: 'Nevada'},
                                       {name: 'New Hampshire',value: 'New Hampshire'},
                                       {name: 'New Jersey',value: 'New Jersy'},
                                      ];         
            }

            function OtherController($scope) {
              $scope.pageChangeHandler = function(num) {
                 console.log('going to page ' + num);
              };
            }
           
            function MyController1($scope,$http) {
                  $scope.currentPage = 1;
                  $scope.pageSize = 10;
                  var url = 'http://congressphp-env.pn3iidvwsk.us-east-2.elasticbeanstalk.com/infoprecess.php?datab=legislators&byTab=house&chamber=house';
                  //var url = 'http://cs-server.usc.edu:24387/infoprecess.php?datab=legislators&byTab=house&chamber=house';
                  $http.get(url)
                      .success(function(data){
                      $scope.total = data.length;
                      $.each(data,function(i,d){
                          if(d.hasOwnProperty('party')){
                               if(d.party == "R"){
                                   d.party = 'r.png';
                               }
                               else if(d.party == "D"){
                                   d.party = 'd.png';
                               }
                               else{
                                   d.party = 'N.A';
                               }
                          }
                          else{
                              d.party = 'N.A';
                          }

                          d.chamber= 'House';
													d.chamberimg = 'h.png';

                          if(d.hasOwnProperty('district')){
                               if(d.district != null){
                                   d.district= d.district;
                               }
                               else{
                                   d.district = 'N.A';
                               }
                          }
                          else{
                               d.district = 'N.A';
                          }

                           if(d.hasOwnProperty('state')){
                               d.state = d.state;
                           }
                           else{
                               d.state = 'N.A';
                           }
                      });
                      $scope.resultList = data;
                  }).error(function(data){
                      alert("error");
                  });

                  $scope.pageChangeHandler = function(num) {
                      console.log('meals page changed to ' + num);
                  };
            }
            
            function MyController2($scope,$http) {
                  $scope.currentPage = 1;
                  $scope.pageSize = 10;
                  var url = 'http://congressphp-env.pn3iidvwsk.us-east-2.elasticbeanstalk.com/infoprecess.php?datab=legislators&byTab=senate&chamber=senate';
                  //var url = 'http://cs-server.usc.edu:24387/infoprecess.php?datab=legislators&byTab=senate&chamber=senate';
                  $http.get(url)
                      .success(function(data){
                      $scope.total = data.length;
                      $.each(data,function(i,d){
                          if(d.hasOwnProperty('party')){
                               if(d.party == "R"){
                                   d.party = 'r.png';
                               }
                               else if(d.party == "D"){
                                   d.party = 'd.png';
                               }
                               else{
                                   d.party = 'N.A';
                               }
                          }
                          else{
                              d.party = 'N.A';
                          }

                          d.chamber= 'Senate';
													d.chamberimg = 's.svg';

												  if(d.hasOwnProperty('state')){
														  d.state = d.state;
												  }
												  else{
													 	 d.state = 'N.A';
												  }
                      });
                      $scope.resultList = data;
                  }).error(function(data){
                      alert("error");
                  });

                  $scope.pageChangeHandler = function(num) {
                      console.log('meals page changed to ' + num);
                  };
            }
           
            function MyBillController($scope,$http){
                  $scope.currentPage = 1;
                  $scope.pageSize = 10;
                  var url = 'http://congressphp-env.pn3iidvwsk.us-east-2.elasticbeanstalk.com/infoprecess.php?datab=bills&byTab=active';
                  $http.get(url)
                      .success(function(data){
                      $scope.total = data.counts.house;
										  $count_num = 1;
                      $.each(data.info,function(i,d){
                          if(d.hasOwnProperty('bill_type')){
                               if(d.bill_type != null){
                                   d.bill_type= d.bill_type;
                               }
                               else{
                                   d.bill_type = 'N.A';
                               }
                          }
                          else{
                              d.bill_type = 'N.A';
                          }
                          
                          if(d.hasOwnProperty('title')){
                               if(d.title != null){
                                   d.title= d.title;
                               }
                               else{
                                   d.title = 'N.A';
                               }
                          }
                          else{
                              d.title = 'N.A';
                          }
                          
												  if($count_num <= data.counts.senate){
														  d.chamber= 'Senate';
														  d.chamberimg = 's.svg';
												  }
												  else if($count_num > data.counts.senate && $count_num <= data.counts.house){
														  d.chamber= 'House';
														  d.chamberimg = 'h.png';
												  }
                          
                          if(d.hasOwnProperty('introduced_date')){
                               if(d.introduced_date != null){
                                   d.introduced_date= d.introduced_date;
                               }
                               else{
                                   d.introduced_date = 'N.A';
                               }
                          }
                          else{
                              d.introduced_date = 'N.A';
                          }

                          if(d.hasOwnProperty('sponsor_name')){
                               if(d.sponsor_name != null){
                                   d.sponsor_name= d.sponsor_title + ' ' + d.sponsor_name;
                               }
                               else{
                                   d.sponsor_name = 'N.A';
                               }
                          }
                          else{
                               d.sponsor_name = 'N.A';
                          }
												  $count_num = $count_num + 1;
                      });
                      $scope.resultList = data.info;
                  }).error(function(data){
                      alert("error");
                  });

                  $scope.pageChangeHandler = function(num) {
                      console.log('meals page changed to ' + num);
                  };
            }
            
            function MyBillController1($scope,$http){
                  $scope.currentPage = 1;
                  $scope.pageSize = 10;
                  var url = 'http://congressphp-env.pn3iidvwsk.us-east-2.elasticbeanstalk.com/infoprecess.php?datab=bills&byTab=new';
                  $http.get(url)
                      .success(function(data){
                      $scope.total = data.length;
                      $.each(data,function(i,d){
                          if(d.hasOwnProperty('bill_type')){
                               if(d.bill_type != null){
                                   d.bill_type= d.bill_type;
                               }
                               else{
                                   d.bill_type = 'N.A';
                               }
                          }
                          else{
                              d.bill_type = 'N.A';
                          }
                          
                          if(d.hasOwnProperty('description')){
                               if(d.description != null){
                                   d.description= d.description;
                               }
                               else{
                                   d.description = 'N.A';
                               }
                          }
                          else{
                              d.description = 'N.A';
                          }
                          
												  if(d.hasOwnProperty('chamber')){
														  if(d.chamber == 'senate'){
																 d.chamber= 'Senate';
														     d.chamberimg = 's.svg';
															} else if(d.chamber == 'house'){
																 d.chamber= 'House';
														     d.chamberimg = 'h.png';
															} else {
																 d.chamber = 'N.A';
															}
												  }
												  else {
														  d.chamber = 'N.A';
													}
                          
                          if(d.hasOwnProperty('legislative_day')){
                               if(d.legislative_day != null){
                                   d.legislative_day= d.legislative_day;
                               }
                               else{
                                   d.legislative_day = 'N.A';
                               }
                          }
                          else{
                              d.legislative_day = 'N.A';
                          }
                      });
                      $scope.resultList = data;
                  }).error(function(data){
                      alert("error");
                  });

                  $scope.pageChangeHandler = function(num) {
                      console.log('meals page changed to ' + num);
                  };
            }
            
            function MyCommitteeController($scope,$http){
                  $scope.currentPage = 1;
                  $scope.pageSize = 10;
                  var url = 'http://congressphp-env.pn3iidvwsk.us-east-2.elasticbeanstalk.com/infoprecess.php?datab=committees&byTab=house';
                  $http.get(url)
                      .success(function(data){
                      $scope.total = data.length;
                      $.each(data,function(i,d){
                          var comid = "";
                          var cham = "";
                          var na = "";
                          var parcom = "";
                          var subcom = "";
                          if(d.hasOwnProperty('id')){
                               if(d.id != null){
                                   d.id= d.id;
                                   comid = d.id;
                               }
                               else{
                                   d.id = 'N.A';
                                   comid = 'N.A';
                               }
                          }
                          else{
                              d.id = 'N.A';
                              comid = 'N.A';
                          }
                          
                          if(d.hasOwnProperty('name')){
                               if(d.name != null){
                                   d.name= d.name;
                                   na = d.name;
                               }
                               else{
                                   d.name = 'N.A';
                                   na = 'N.A';
                               }
                          }
                          else{
                              d.name = 'N.A';
                              na = 'N.A';
                          }
                          
                          if(d.hasOwnProperty('chamber')){
                               if(d.chamber == "Senate"){
                                   d.chamber= 'Senate';
                                   d.chamberimg = 's.svg';
                                   cham = d.chamber;
                               }
                               else if(d.chamber == "House"){
                                   d.chamber= 'House';
                                   d.chamberimg = 'h.png';
                                   cham = d.chamber;
                               }
                               else if(d.chamber == "Joint"){
                                   d.chamber = 'Joint';
                                   d.chamberimg = 's.svg';
                                   cham = d.chamber;
                               }
                               else{
                                   d.chamber = 'N.A';
                                   cham = 'N.A';
                               }
                          }
                          else{
                               d.chamber = 'N.A';
                               cham = 'N.A';
                          }
                          
                          if(d.hasOwnProperty('subcommittees')){
                               if(d.subcommittees != null){
                                   d.subcommittees= d.subcommittees.length;
                                   parcom = d.subcommittees;
                               }
                               else{
                                   d.subcommittees = 'N.A';
                                   parcom = 'N.A';
                               }
                          }
                          else{
                              d.subcommittees = 'N.A';
                              parcom = 'N.A';
                          }

                          if(d.hasOwnProperty('chair_state')){
                               if(d.chair_state != null){
                                   d.chair_state= d.chair_state;
                               }
                               else{
                                   d.chair_state = 'N.A';
                               }
                          }
                          else{
                               d.chair_state = 'N.A';
                          }
                          if(d.hasOwnProperty('chair')){
                               if(d.chair != null){
                                   d.chair= d.chair;
                               }
                               else{
                                   d.chair = 'N.A';
                               }
                          }
                          else{
                               d.chair = 'N.A';
                          }
                        
                          if(d.hasOwnProperty('subcommittees')){
                               if(d.subcommittees != null){
                                   subcom = d.subcommittees;
                               }
                               else{
                                   subcom = '0';
                               }
                          }
                          else{
                              subcom = '0';
                          }
                           var Obj111 = [];
                           var item11 = {};
                           item11["comid"] = comid;
                           item11["chamber"] = cham;
                           item11["name"] = na;
                           item11["parent_committee"] = d.chair;
                           item11['sub_committee'] = subcom;
                           Obj111.push(item11);
                           var k = '"c'+comid+'"';
                           //alert(k);
                           var jsonString = JSON.stringify(Obj111);
												   //alert(jsonString);
                           d.jsonstr = jsonString;
                      });
                      $scope.resultList = data;
                  }).error(function(data){
                      alert("error");
                  });

                  $scope.pageChangeHandler = function(num) {
                      console.log('meals page changed to ' + num);
                  };
            }
           
            function MyCommitteeController1($scope,$http){
                  $scope.currentPage = 1;
                  $scope.pageSize = 10;
                  var url = 'http://congressphp-env.pn3iidvwsk.us-east-2.elasticbeanstalk.com/infoprecess.php?datab=committees&byTab=senate';
                  $http.get(url)
                      .success(function(data){
                      $scope.total = data.length;
                      $.each(data,function(i,d){
                          var comid = "";
                          var cham = "";
                          var na = "";
                          var parcom = "";
                          var subcom = "";
                          if(d.hasOwnProperty('id')){
                               if(d.id != null){
                                   d.id= d.id;
                                   comid = d.id;
                               }
                               else{
                                   d.id = 'N.A';
                                   comid = 'N.A';
                               }
                          }
                          else{
                              d.id = 'N.A';
                              comid = 'N.A';
                          }
                          
                          if(d.hasOwnProperty('name')){
                               if(d.name != null){
                                   d.name= d.name;
                                   na = d.name;
                               }
                               else{
                                   d.name = 'N.A';
                                   na = 'N.A';
                               }
                          }
                          else{
                              d.name = 'N.A';
                              na = 'N.A';
                          }
                          
                          if(d.hasOwnProperty('chamber')){
                               if(d.chamber == "Senate"){
                                   d.chamber= 'Senate';
                                   d.chamberimg = 's.svg';
                                   cham = d.chamber;
                               }
                               else if(d.chamber == "House"){
                                   d.chamber= 'House';
                                   d.chamberimg = 'h.png';
                                   cham = d.chamber;
                               }
                               else if(d.chamber == "Joint"){
                                   d.chamber = 'Joint';
                                   d.chamberimg = 's.svg';
                                   cham = d.chamber;
                               }
                               else{
                                   d.chamber = 'N.A';
                                   cham = 'N.A';
                               }
                          }
                          else{
                               d.chamber = 'N.A';
                               cham = 'N.A';
                          }
                          
                          if(d.hasOwnProperty('subcommittees')){
                               if(d.subcommittees != null){
                                   d.subcommittees= d.subcommittees.length;
                                   parcom = d.subcommittees;
                               }
                               else{
                                   d.subcommittees = 'N.A';
                                   parcom = 'N.A';
                               }
                          }
                          else{
                              d.subcommittees = 'N.A';
                              parcom = 'N.A';
                          }

                          if(d.hasOwnProperty('chair_state')){
                               if(d.chair_state != null){
                                   d.chair_state= d.chair_state;
                               }
                               else{
                                   d.chair_state = 'N.A';
                               }
                          }
                          else{
                               d.chair_state = 'N.A';
                          }
                          if(d.hasOwnProperty('chair')){
                               if(d.chair != null){
                                   d.chair= d.chair;
                               }
                               else{
                                   d.chair = 'N.A';
                               }
                          }
                          else{
                               d.chair = 'N.A';
                          }
                        
                          if(d.hasOwnProperty('subcommittees')){
                               if(d.subcommittees != null){
                                   subcom = d.subcommittees;
                               }
                               else{
                                   subcom = 'N.A';
                               }
                          }
                          else{
                              subcom = 'N.A';
                          }
                           var Obj111 = [];
                           var item11 = {};
                           item11["comid"] = comid;
                           item11["chamber"] = cham;
                           item11["name"] = na;
                           item11["parent_committee"] = d.chair;
                           item11["sub_committee"] = subcom;
                           Obj111.push(item11);
                           var k = '"c'+comid+'"';
                           //alert(k);
                           var jsonString = JSON.stringify(Obj111); 
                           d.jsonstr = jsonString;
                      });
                      $scope.resultList = data;
                  }).error(function(data){
                      alert("error");
                  });

                  $scope.pageChangeHandler = function(num) {
                      console.log('meals page changed to ' + num);
                  };
            }
            
            function MyCommitteeController2($scope,$http){
                  $scope.currentPage = 1;
                  $scope.pageSize = 10;
                  var url = 'http://congressphp-env.pn3iidvwsk.us-east-2.elasticbeanstalk.com/infoprecess.php?datab=committees&byTab=joint';
                  $http.get(url)
                      .success(function(data){
                      $scope.total = data.length;
                      $.each(data,function(i,d){
                          var comid = "";
                          var cham = "";
                          var na = "";
                          var parcom = "";
                          var subcom = "";
                          if(d.hasOwnProperty('id')){
                               if(d.id != null){
                                   d.id= d.id;
                                   comid = d.id;
                               }
                               else{
                                   d.id = 'N.A';
                                   comid = 'N.A';
                               }
                          }
                          else{
                              d.id = 'N.A';
                              comid = 'N.A';
                          }
                          
                          if(d.hasOwnProperty('name')){
                               if(d.name != null){
                                   d.name= d.name;
                                   na = d.name;
                               }
                               else{
                                   d.name = 'N.A';
                                   na = 'N.A';
                               }
                          }
                          else{
                              d.name = 'N.A';
                              na = 'N.A';
                          }
                          
                          if(d.hasOwnProperty('chamber')){
                               if(d.chamber == "Senate"){
                                   d.chamber= 'Senate';
                                   d.chamberimg = 's.svg';
                                   cham = d.chamber;
                               }
                               else if(d.chamber == "House"){
                                   d.chamber= 'House';
                                   d.chamberimg = 'h.png';
                                   cham = d.chamber;
                               }
                               else if(d.chamber == "Joint"){
                                   d.chamber = 'Joint';
                                   d.chamberimg = 's.svg';
                                   cham = d.chamber;
                               }
                               else{
                                   d.chamber = 'N.A';
                                   cham = 'N.A';
                               }
                          }
                          else{
                               d.chamber = 'N.A';
                               cham = 'N.A';
                          }
                          
                          if(d.hasOwnProperty('subcommittees')){
                               if(d.subcommittees != null){
                                   d.subcommittees= d.subcommittees.length;
                                   parcom = d.subcommittees;
                               }
                               else{
                                   d.subcommittees = 'N.A';
                                   parcom = 'N.A';
                               }
                          }
                          else{
                              d.subcommittees = 'N.A';
                              parcom = 'N.A';
                          }

                          if(d.hasOwnProperty('chair_state')){
                               if(d.chair_state != null){
                                   d.chair_state= d.chair_state;
                               }
                               else{
                                   d.chair_state = 'N.A';
                               }
                          }
                          else{
                               d.chair_state = 'N.A';
                          }
                          if(d.hasOwnProperty('chair')){
                               if(d.chair != null){
                                   d.chair= d.chair;
                               }
                               else{
                                   d.chair = 'N.A';
                               }
                          }
                          else{
                               d.chair = 'N.A';
                          }
                        
                          if(d.hasOwnProperty('subcommittees')){
                               if(d.subcommittees != null){
                                   subcom = d.subcommittees;
                               }
                               else{
                                   subcom = 'N.A';
                               }
                          }
                          else{
                              subcom = 'N.A';
                          }
                           var Obj111 = [];
                           var item11 = {};
                           item11["comid"] = comid;
                           item11["chamber"] = cham;
                           item11["name"] = na;
                           item11["parent_committee"] = d.chair;
                           item11["sub_committee"] = subcom;
                           Obj111.push(item11);
                           var k = '"c'+comid+'"';
                           //alert(k);
                           var jsonString = JSON.stringify(Obj111); 
                           d.jsonstr = jsonString;
                      });
                      $scope.resultList = data;
                  }).error(function(data){
                      alert("error");
                  });

                  $scope.pageChangeHandler = function(num) {
                      console.log('meals page changed to ' + num);
                  };
            }
           
            function OtherController($scope) {
              $scope.pageChangeHandler = function(num) {
                 console.log('going to page ' + num);
              };
            }
            function OtherController1($scope){
               $scope.pageChangeHandler = function(num) {
                     console.log('going to page ' + num);
               };
            }
            function OtherController2($scope){
               $scope.pageChangeHandler = function(num) {
                     console.log('going to page ' + num);
               };
            }
            function OtherBillController($scope){
                $scope.pageChangeHandler = function(num) {
                     console.log('going to page ' + num);
               };
            }
            function OtherBillController1($scope){
                $scope.pageChangeHandler = function(num) {
                     console.log('going to page ' + num);
               };
            }
            function OtherCommitteeController($scope){
                $scope.pageChangeHandler = function(num) {
                     console.log('going to page ' + num);
               };
            }
            function OtherCommitteeController1($scope){
                $scope.pageChangeHandler = function(num) {
                     console.log('going to page ' + num);
               };
            }
            function OtherCommitteeController2($scope){
                $scope.pageChangeHandler = function(num) {
                     console.log('going to page ' + num);
               };
            }
            myApp.controller('MyController', MyController);
            myApp.controller('OtherController', OtherController);
            myApp.controller('MyController1', MyController1);
            myApp.controller('OtherController1', OtherController1);
            myApp.controller('MyController2', MyController2);
            myApp.controller('OtherController2', OtherController2);
            myApp.controller('MyBillController', MyBillController);
            myApp.controller('OtherBillController', OtherBillController);
            myApp.controller('MyBillController1', MyBillController1);
            myApp.controller('OtherBillController1', OtherBillController1);
            myApp.controller('MyCommitteeController', MyCommitteeController);
            myApp.controller('OtherCommitteeController', OtherCommitteeController);
            myApp.controller('MyCommitteeController1', MyCommitteeController1);
            myApp.controller('OtherCommitteeController1', OtherCommitteeController1);
            myApp.controller('MyCommitteeController2', MyCommitteeController2);
            myApp.controller('OtherCommitteeController2', OtherCommitteeController2);
       </script>
       <noscript></noscript>
   </body>
</html>